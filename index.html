<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/"/>





  <title>Hexo</title>
  














<meta name="generator" content="Hexo 7.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/21/%E3%80%90AgentX%E3%80%91token%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AD%96%E7%95%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/06/21/%E3%80%90AgentX%E3%80%91token%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AD%96%E7%95%A5/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-06-21T00:10:10+08:00">
                2025-06-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ã€AgentXã€‘tokenä¸Šä¸‹æ–‡ç­–ç•¥"><a href="#ã€AgentXã€‘tokenä¸Šä¸‹æ–‡ç­–ç•¥" class="headerlink" title="ã€AgentXã€‘tokenä¸Šä¸‹æ–‡ç­–ç•¥"></a>ã€AgentXã€‘tokenä¸Šä¸‹æ–‡ç­–ç•¥</h1><p>åŸºäº AgentX é¡¹ç›®çš„å®é™…ä»£ç å®ç°ï¼Œæˆ‘æ¥å›ç­”è¿™äº›é¢è¯•é—®é¢˜ï¼š</p>
<h2 id="ğŸ—ï¸-ç³»ç»Ÿè®¾è®¡ç±»é—®é¢˜"><a href="#ğŸ—ï¸-ç³»ç»Ÿè®¾è®¡ç±»é—®é¢˜" class="headerlink" title="ğŸ—ï¸ ç³»ç»Ÿè®¾è®¡ç±»é—®é¢˜"></a>ğŸ—ï¸ ç³»ç»Ÿè®¾è®¡ç±»é—®é¢˜</h2><h3 id="1-â€œè¯·è®¾è®¡ä¸€ä¸ªæ”¯æŒå¤šç§-Token-ç®¡ç†ç­–ç•¥çš„å¯æ‰©å±•æ¶æ„â€"><a href="#1-â€œè¯·è®¾è®¡ä¸€ä¸ªæ”¯æŒå¤šç§-Token-ç®¡ç†ç­–ç•¥çš„å¯æ‰©å±•æ¶æ„â€" class="headerlink" title="1. â€œè¯·è®¾è®¡ä¸€ä¸ªæ”¯æŒå¤šç§ Token ç®¡ç†ç­–ç•¥çš„å¯æ‰©å±•æ¶æ„â€"></a>1. â€œè¯·è®¾è®¡ä¸€ä¸ªæ”¯æŒå¤šç§ Token ç®¡ç†ç­–ç•¥çš„å¯æ‰©å±•æ¶æ„â€</h3><p><strong>åŸºäº AgentX çš„å›ç­”ï¼š</strong></p>
<p>AgentX é‡‡ç”¨äº†ç­–ç•¥æ¨¡å¼ + å·¥å‚æ¨¡å¼çš„ç»å…¸æ¶æ„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç­–ç•¥æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TokenOverflowStrategy</span> &#123;</span><br><span class="line">    TokenProcessResult <span class="title function_">process</span><span class="params">(List&lt;TokenMessage&gt; messages, TokenOverflowConfig config)</span>;</span><br><span class="line">    String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">needsProcessing</span><span class="params">(List&lt;TokenMessage&gt; messages)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥å‚ç±»è´Ÿè´£åˆ›å»ºç­–ç•¥å®ä¾‹</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenOverflowStrategyFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> TokenOverflowStrategy <span class="title function_">createStrategy</span><span class="params">(</span></span><br><span class="line"><span class="params">        TokenOverflowStrategyEnum strategyType, </span></span><br><span class="line"><span class="params">        TokenOverflowConfig config)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (strategyType) &#123;</span><br><span class="line">            <span class="keyword">case</span> SLIDING_WINDOW: <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SlidingWindowTokenOverflowStrategy</span>(config);</span><br><span class="line">            <span class="keyword">case</span> SUMMARIZE: <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SummarizeTokenOverflowStrategy</span>(config);</span><br><span class="line">            <span class="keyword">case</span> NONE: </span><br><span class="line">            <span class="keyword">default</span>: <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NoTokenOverflowStrategy</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ¶æ„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ–°å¢ç­–ç•¥åªéœ€å®ç° <code>TokenOverflowStrategy</code> æ¥å£</li>
<li><strong>é…ç½®é©±åŠ¨</strong>ï¼šé€šè¿‡ <code>TokenOverflowConfig</code> ç»Ÿä¸€ç®¡ç†ç­–ç•¥å‚æ•°</li>
<li><strong>è§£è€¦åˆ</strong>ï¼šç­–ç•¥å®ç°ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»</li>
</ul>
<h3 id="2-â€œå¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘åœºæ™¯ä¸‹çš„ä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿï¼Ÿâ€"><a href="#2-â€œå¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘åœºæ™¯ä¸‹çš„ä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿï¼Ÿâ€" class="headerlink" title="2. â€œå¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘åœºæ™¯ä¸‹çš„ä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿï¼Ÿâ€"></a>2. â€œå¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘åœºæ™¯ä¸‹çš„ä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿï¼Ÿâ€</h3><p><strong>AgentX çš„å¹¶å‘å¤„ç†è®¾è®¡ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸Šä¸‹æ–‡å¤„ç†å™¨ä½¿ç”¨ Spring ç®¡ç†å¹¶å‘</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContextProcessor</span> &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ä¾èµ–æ³¨å…¥ä¿è¯çº¿ç¨‹å®‰å…¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ContextDomainService contextDomainService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MessageDomainService messageDomainService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TokenDomainService tokenDomainService;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¯ä¸ªä¼šè¯ç‹¬ç«‹å¤„ç†ï¼Œé¿å…å…±äº«çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">public</span> ContextResult <span class="title function_">processContext</span><span class="params">(String sessionId, ...)</span> &#123;</span><br><span class="line">        <span class="type">ContextEntity</span> <span class="variable">contextEntity</span> <span class="operator">=</span> contextDomainService.findBySessionId(sessionId);</span><br><span class="line">        <span class="comment">// åŸºäº sessionId éš”ç¦»ï¼Œå¤©ç„¶æ”¯æŒå¹¶å‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¹¶å‘å®‰å…¨ä¿è¯ï¼š</strong></p>
<ul>
<li><strong>æ— çŠ¶æ€è®¾è®¡</strong>ï¼šç­–ç•¥ç±»ä¸ç»´æŠ¤çŠ¶æ€ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„</li>
<li><strong>ä¼šè¯éš”ç¦»</strong>ï¼šåŸºäº <code>sessionId</code> è¿›è¡Œæ•°æ®éš”ç¦»</li>
<li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šä½¿ç”¨ <code>@Transactional</code> ä¿è¯æ•°æ®ä¸€è‡´æ€§</li>
</ul>
<h2 id="ğŸ”§-ç®—æ³•å’ŒæŠ€æœ¯å®ç°ç±»é—®é¢˜"><a href="#ğŸ”§-ç®—æ³•å’ŒæŠ€æœ¯å®ç°ç±»é—®é¢˜" class="headerlink" title="ğŸ”§ ç®—æ³•å’ŒæŠ€æœ¯å®ç°ç±»é—®é¢˜"></a>ğŸ”§ ç®—æ³•å’ŒæŠ€æœ¯å®ç°ç±»é—®é¢˜</h2><h3 id="3-â€œå¦‚ä½•ç²¾ç¡®è®¡ç®—ä¸åŒæ¨¡å‹çš„-Token-æ•°é‡ï¼Ÿâ€"><a href="#3-â€œå¦‚ä½•ç²¾ç¡®è®¡ç®—ä¸åŒæ¨¡å‹çš„-Token-æ•°é‡ï¼Ÿâ€" class="headerlink" title="3. â€œå¦‚ä½•ç²¾ç¡®è®¡ç®—ä¸åŒæ¨¡å‹çš„ Token æ•°é‡ï¼Ÿâ€"></a>3. â€œå¦‚ä½•ç²¾ç¡®è®¡ç®—ä¸åŒæ¨¡å‹çš„ Token æ•°é‡ï¼Ÿâ€</h3><p><strong>AgentX çš„ Token è®¡ç®—å®ç°ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰å®ç°ä¸­ï¼ŒToken æ•°é‡å­˜å‚¨åœ¨ TokenMessage ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenMessage</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer tokenCount; <span class="comment">// é¢„è®¡ç®—çš„ token æ•°é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åœ¨æ¶ˆæ¯åˆ›å»ºæ—¶è®¡ç®—å¹¶ç¼“å­˜</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTokenCount</span><span class="params">(Integer tokenCount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.tokenCount = tokenCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ»‘åŠ¨çª—å£ç­–ç•¥ä¸­çš„ Token è®¡ç®—</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">calculateTotalTokens</span><span class="params">(List&lt;TokenMessage&gt; messages)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> messages.stream()</span><br><span class="line">        .mapToInt(m -&gt; m.getTokenCount() != <span class="literal">null</span> ? m.getTokenCount() : <span class="number">0</span>)</span><br><span class="line">        .sum();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><strong>æ¨¡å‹å·®å¼‚æ€§</strong>ï¼šä¸åŒæ¨¡å‹æœ‰ä¸åŒçš„ tokenizerï¼Œéœ€è¦é€‚é…</li>
<li><strong>è®¡ç®—æ€§èƒ½</strong>ï¼šAgentX é‡‡ç”¨é¢„è®¡ç®— + ç¼“å­˜çš„æ–¹å¼é¿å…é‡å¤è®¡ç®—</li>
<li><strong>å‡†ç¡®æ€§ä¿è¯</strong>ï¼šå»ºè®®é›†æˆå…·ä½“æ¨¡å‹çš„ tokenizer åº“</li>
</ul>
<h3 id="4-â€œæ‘˜è¦ç®—æ³•å¦‚ä½•ä¿è¯ä¸ä¸¢å¤±å…³é”®ä¿¡æ¯ï¼Ÿâ€"><a href="#4-â€œæ‘˜è¦ç®—æ³•å¦‚ä½•ä¿è¯ä¸ä¸¢å¤±å…³é”®ä¿¡æ¯ï¼Ÿâ€" class="headerlink" title="4. â€œæ‘˜è¦ç®—æ³•å¦‚ä½•ä¿è¯ä¸ä¸¢å¤±å…³é”®ä¿¡æ¯ï¼Ÿâ€"></a>4. â€œæ‘˜è¦ç®—æ³•å¦‚ä½•ä¿è¯ä¸ä¸¢å¤±å…³é”®ä¿¡æ¯ï¼Ÿâ€</h3><p><strong>AgentX çš„æ‘˜è¦å®ç°åˆ†æï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">generateSummary</span><span class="params">(List&lt;TokenMessage&gt; messages, TokenOverflowConfig config)</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä¸“é—¨çš„æ‘˜è¦æç¤ºè¯</span></span><br><span class="line">    <span class="type">SystemMessage</span> <span class="variable">systemMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(</span><br><span class="line">        <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¯¹è¯æ‘˜è¦ç”Ÿæˆå™¨ï¼Œè¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹è¦æ±‚å·¥ä½œï¼š\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;1. åªåŸºäºæä¾›çš„å¯¹è¯å†…å®¹ç”Ÿæˆå®¢è§‚æ‘˜è¦ï¼Œä¸å¾—æ·»åŠ ä»»ä½•åŸå¯¹è¯ä¸­æ²¡æœ‰çš„ä¿¡æ¯\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;2. ç‰¹åˆ«å…³æ³¨ï¼šç”¨æˆ·é—®é¢˜ã€å›ç­”ä¸­çš„å…³é”®ä¿¡æ¯ã€é‡è¦äº‹å®\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;3. å»é™¤æ‰€æœ‰å¯’æš„ã€è¡¨æƒ…ç¬¦å·å’Œæƒ…æ„Ÿè¡¨è¾¾\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;4. ä½¿ç”¨ç®€æ´çš„ç¬¬ä¸‰äººç§°é™ˆè¿°å¥\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;5. ä¿æŒæ—¶é—´é¡ºåºå’Œé€»è¾‘å…³ç³»\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;6. ç¤ºä¾‹æ ¼å¼ï¼š[ç”¨æˆ·]é—®... [AI]å›ç­”...\n&quot;</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è´¨é‡ä¿è¯æœºåˆ¶ï¼š</strong></p>
<ul>
<li><strong>ç»“æ„åŒ–æç¤ºè¯</strong>ï¼šæ˜ç¡®æŒ‡å¯¼æ‘˜è¦ç”Ÿæˆçš„è§„åˆ™</li>
<li><strong>é‡è¦ä¿¡æ¯æ ‡è¯†</strong>ï¼šç‰¹åˆ«å…³æ³¨ç”¨æˆ·é—®é¢˜å’Œå…³é”®å›ç­”</li>
<li><strong>æ ¼å¼è§„èŒƒ</strong>ï¼šä½¿ç”¨ç»Ÿä¸€çš„æ‘˜è¦æ ¼å¼ä¾¿äºåç»­å¤„ç†</li>
</ul>
<h2 id="ğŸ“Š-æ€§èƒ½å’Œå¹¶å‘é—®é¢˜"><a href="#ğŸ“Š-æ€§èƒ½å’Œå¹¶å‘é—®é¢˜" class="headerlink" title="ğŸ“Š æ€§èƒ½å’Œå¹¶å‘é—®é¢˜"></a>ğŸ“Š æ€§èƒ½å’Œå¹¶å‘é—®é¢˜</h2><h3 id="5-â€œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ä¼˜åŒ–-Token-è®¡ç®—çš„æ€§èƒ½ï¼Ÿâ€"><a href="#5-â€œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ä¼˜åŒ–-Token-è®¡ç®—çš„æ€§èƒ½ï¼Ÿâ€" class="headerlink" title="5. â€œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ä¼˜åŒ– Token è®¡ç®—çš„æ€§èƒ½ï¼Ÿâ€"></a>5. â€œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ä¼˜åŒ– Token è®¡ç®—çš„æ€§èƒ½ï¼Ÿâ€</h3><p><strong>AgentX çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. é¢„è®¡ç®— Token æ•°é‡ï¼Œé¿å…å®æ—¶è®¡ç®—</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenMessage</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer tokenCount; <span class="comment">// æ¶ˆæ¯åˆ›å»ºæ—¶å°±è®¡ç®—å¥½</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. æ‰¹é‡å¤„ç†æ¶ˆæ¯</span></span><br><span class="line"><span class="keyword">public</span> TokenProcessResult <span class="title function_">process</span><span class="params">(List&lt;TokenMessage&gt; messages, TokenOverflowConfig config)</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸€æ¬¡æ€§å¤„ç†æ•´ä¸ªæ¶ˆæ¯åˆ—è¡¨ï¼Œå‡å°‘æ•°æ®åº“è®¿é—®</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">totalTokens</span> <span class="operator">=</span> calculateTotalTokens(messages);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. é…ç½®ç¼“å­˜é¿å…é‡å¤åˆ›å»ºç­–ç•¥å¯¹è±¡</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenOverflowStrategyFactory</span> &#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥å¢åŠ ç­–ç•¥å®ä¾‹ç¼“å­˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-â€œæ‘˜è¦ç”Ÿæˆæ˜¯-I-O-å¯†é›†å‹æ“ä½œï¼Œå¦‚ä½•è®¾è®¡å¼‚æ­¥å¤„ç†ï¼Ÿâ€"><a href="#6-â€œæ‘˜è¦ç”Ÿæˆæ˜¯-I-O-å¯†é›†å‹æ“ä½œï¼Œå¦‚ä½•è®¾è®¡å¼‚æ­¥å¤„ç†ï¼Ÿâ€" class="headerlink" title="6. â€œæ‘˜è¦ç”Ÿæˆæ˜¯ I&#x2F;O å¯†é›†å‹æ“ä½œï¼Œå¦‚ä½•è®¾è®¡å¼‚æ­¥å¤„ç†ï¼Ÿâ€"></a>6. â€œæ‘˜è¦ç”Ÿæˆæ˜¯ I&#x2F;O å¯†é›†å‹æ“ä½œï¼Œå¦‚ä½•è®¾è®¡å¼‚æ­¥å¤„ç†ï¼Ÿâ€</h3><p><strong>å½“å‰åŒæ­¥å®ç°çš„é—®é¢˜ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰å®ç°æ˜¯åŒæ­¥çš„ï¼Œä¼šé˜»å¡ç”¨æˆ·è¯·æ±‚</span></span><br><span class="line"><span class="type">String</span> <span class="variable">summary</span> <span class="operator">=</span> generateSummary(messagesToSummarize, tokenOverflowConfig);</span><br></pre></td></tr></table></figure>

<p><strong>å»ºè®®çš„å¼‚æ­¥ä¼˜åŒ–ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯ä»¥è®¾è®¡å¼‚æ­¥æ‘˜è¦ç”Ÿæˆ</span></span><br><span class="line"><span class="meta">@Async(&quot;summaryExecutor&quot;)</span></span><br><span class="line"><span class="keyword">public</span> CompletableFuture&lt;String&gt; <span class="title function_">generateSummaryAsync</span><span class="params">(List&lt;TokenMessage&gt; messages)</span> &#123;</span><br><span class="line">    <span class="comment">// å¼‚æ­¥ç”Ÿæˆæ‘˜è¦ï¼Œç”¨æˆ·è¯·æ±‚ä¸è¢«é˜»å¡</span></span><br><span class="line">    <span class="comment">// å¯ä»¥å…ˆè¿”å›ä¸´æ—¶çš„æ»‘åŠ¨çª—å£ç»“æœï¼Œæ‘˜è¦å®Œæˆåå†æ›´æ–°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-ä¸šåŠ¡é€»è¾‘å’Œè¾¹ç•Œæƒ…å†µ"><a href="#ğŸ¯-ä¸šåŠ¡é€»è¾‘å’Œè¾¹ç•Œæƒ…å†µ" class="headerlink" title="ğŸ¯ ä¸šåŠ¡é€»è¾‘å’Œè¾¹ç•Œæƒ…å†µ"></a>ğŸ¯ ä¸šåŠ¡é€»è¾‘å’Œè¾¹ç•Œæƒ…å†µ</h2><h3 id="7-â€œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥é€‰æ‹©æ»‘åŠ¨çª—å£-vs-æ‘˜è¦ç­–ç•¥ï¼Ÿâ€"><a href="#7-â€œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥é€‰æ‹©æ»‘åŠ¨çª—å£-vs-æ‘˜è¦ç­–ç•¥ï¼Ÿâ€" class="headerlink" title="7. â€œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥é€‰æ‹©æ»‘åŠ¨çª—å£ vs æ‘˜è¦ç­–ç•¥ï¼Ÿâ€"></a>7. â€œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥é€‰æ‹©æ»‘åŠ¨çª—å£ vs æ‘˜è¦ç­–ç•¥ï¼Ÿâ€</h3><p><strong>åŸºäº AgentX ä»£ç çš„åˆ†æï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ»‘åŠ¨çª—å£ç­–ç•¥ - é€‚åˆç®€å•å¯¹è¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SlidingWindowTokenOverflowStrategy</span> &#123;</span><br><span class="line">    <span class="comment">// ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œæ— éœ€é¢å¤–LLMè°ƒç”¨ï¼Œå»¶è¿Ÿä½</span></span><br><span class="line">    <span class="comment">// ç¼ºç‚¹ï¼šå†å²ä¿¡æ¯å®Œå…¨ä¸¢å¤±</span></span><br><span class="line">    <span class="comment">// é€‚ç”¨ï¼šé—®ç­”ç±»ã€ä¸éœ€è¦é•¿æœŸè®°å¿†çš„åœºæ™¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‘˜è¦ç­–ç•¥ - é€‚åˆå¤æ‚å¯¹è¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SummarizeTokenOverflowStrategy</span> &#123;</span><br><span class="line">    <span class="comment">// ä¼˜ç‚¹ï¼šä¿ç•™å…³é”®å†å²ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–LLMè°ƒç”¨ï¼Œæœ‰å»¶è¿Ÿå’Œæˆæœ¬</span></span><br><span class="line">    <span class="comment">// é€‚ç”¨ï¼šéœ€è¦ä¸Šä¸‹æ–‡è¿è´¯æ€§çš„å¤æ‚å¯¹è¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€‰æ‹©ç­–ç•¥ï¼š</strong></p>
<ul>
<li><strong>å®¢æœåœºæ™¯</strong>ï¼šæ»‘åŠ¨çª—å£ï¼ˆæ¯æ¬¡å¯¹è¯ç›¸å¯¹ç‹¬ç«‹ï¼‰</li>
<li><strong>ç¼–ç¨‹åŠ©æ‰‹</strong>ï¼šæ‘˜è¦ç­–ç•¥ï¼ˆéœ€è¦è®°ä½ä¹‹å‰çš„ä»£ç ä¸Šä¸‹æ–‡ï¼‰</li>
<li><strong>åˆ›ä½œåŠ©æ‰‹</strong>ï¼šæ‘˜è¦ç­–ç•¥ï¼ˆéœ€è¦ä¿æŒåˆ›ä½œè¿è´¯æ€§ï¼‰</li>
</ul>
<h3 id="8-â€œå¦‚æœå•æ¡æ¶ˆæ¯å°±è¶…è¿‡æ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶æ€ä¹ˆåŠï¼Ÿâ€"><a href="#8-â€œå¦‚æœå•æ¡æ¶ˆæ¯å°±è¶…è¿‡æ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶æ€ä¹ˆåŠï¼Ÿâ€" class="headerlink" title="8. â€œå¦‚æœå•æ¡æ¶ˆæ¯å°±è¶…è¿‡æ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶æ€ä¹ˆåŠï¼Ÿâ€"></a>8. â€œå¦‚æœå•æ¡æ¶ˆæ¯å°±è¶…è¿‡æ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶æ€ä¹ˆåŠï¼Ÿâ€</h3><p><strong>AgentX å½“å‰å®ç°çš„ä¸è¶³ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰ä»£ç æ²¡æœ‰å¤„ç†å•æ¡æ¶ˆæ¯è¿‡é•¿çš„æƒ…å†µ</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">calculateTotalTokens</span><span class="params">(List&lt;TokenMessage&gt; messages)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> messages.stream().mapToInt(m -&gt; m.getTokenCount() != <span class="literal">null</span> ? m.getTokenCount() : <span class="number">0</span>).sum();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å»ºè®®çš„å¤„ç†æ–¹æ¡ˆï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageSplitter</span> &#123;</span><br><span class="line">    <span class="comment">// å¯¹è¶…é•¿æ¶ˆæ¯è¿›è¡Œæ™ºèƒ½åˆ†å‰²</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;TokenMessage&gt; <span class="title function_">splitLongMessage</span><span class="params">(TokenMessage longMessage, <span class="type">int</span> maxTokens)</span> &#123;</span><br><span class="line">        <span class="comment">// æŒ‰æ®µè½ã€å¥å­è¾¹ç•Œè¿›è¡Œåˆ†å‰²</span></span><br><span class="line">        <span class="comment">// ä¿æŒè¯­ä¹‰å®Œæ•´æ€§</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ”-æ•°æ®ä¸€è‡´æ€§å’Œå¯é æ€§"><a href="#ğŸ”-æ•°æ®ä¸€è‡´æ€§å’Œå¯é æ€§" class="headerlink" title="ğŸ” æ•°æ®ä¸€è‡´æ€§å’Œå¯é æ€§"></a>ğŸ” æ•°æ®ä¸€è‡´æ€§å’Œå¯é æ€§</h2><h3 id="9-â€œä¸Šä¸‹æ–‡æ›´æ–°å’Œæ¶ˆæ¯ä¿å­˜å¦‚ä½•ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼Ÿâ€"><a href="#9-â€œä¸Šä¸‹æ–‡æ›´æ–°å’Œæ¶ˆæ¯ä¿å­˜å¦‚ä½•ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼Ÿâ€" class="headerlink" title="9. â€œä¸Šä¸‹æ–‡æ›´æ–°å’Œæ¶ˆæ¯ä¿å­˜å¦‚ä½•ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼Ÿâ€"></a>9. â€œä¸Šä¸‹æ–‡æ›´æ–°å’Œæ¶ˆæ¯ä¿å­˜å¦‚ä½•ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼Ÿâ€</h3><p><strong>AgentX çš„äº‹åŠ¡ç®¡ç†ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatCompletionHandlerImpl</span> <span class="keyword">implements</span> <span class="title class_">ChatCompletionHandler</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span>  <span class="comment">// ä½¿ç”¨äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleCompletion</span><span class="params">(MessageEntity userMessage, MessageEntity llmMessage, </span></span><br><span class="line"><span class="params">                                ContextEntity contextEntity, ...)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. ä¿å­˜æ¶ˆæ¯</span></span><br><span class="line">            List&lt;MessageEntity&gt; messages = Arrays.asList(userMessage, llmMessage);</span><br><span class="line">            conversationDomainService.saveMessages(messages);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 2. æ›´æ–°ä¸Šä¸‹æ–‡</span></span><br><span class="line">            contextDomainService.updateContext(contextEntity);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// äº‹åŠ¡å›æ»šï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(<span class="string">&quot;èŠå¤©å®Œæˆå¤„ç†å¤±è´¥&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-â€œå¦‚ä½•è®¾è®¡ç›‘æ§æŒ‡æ ‡æ¥è¯„ä¼°-Token-ç®¡ç†ç­–ç•¥çš„æ•ˆæœï¼Ÿâ€"><a href="#10-â€œå¦‚ä½•è®¾è®¡ç›‘æ§æŒ‡æ ‡æ¥è¯„ä¼°-Token-ç®¡ç†ç­–ç•¥çš„æ•ˆæœï¼Ÿâ€" class="headerlink" title="10. â€œå¦‚ä½•è®¾è®¡ç›‘æ§æŒ‡æ ‡æ¥è¯„ä¼° Token ç®¡ç†ç­–ç•¥çš„æ•ˆæœï¼Ÿâ€"></a>10. â€œå¦‚ä½•è®¾è®¡ç›‘æ§æŒ‡æ ‡æ¥è¯„ä¼° Token ç®¡ç†ç­–ç•¥çš„æ•ˆæœï¼Ÿâ€</h3><p><strong>åŸºäº AgentX å¯ä»¥å¢åŠ çš„ç›‘æ§æŒ‡æ ‡ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenManagementMetrics</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. ç­–ç•¥ä½¿ç”¨ç»Ÿè®¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordStrategyUsage</span><span class="params">(String sessionId, TokenOverflowStrategyEnum strategy)</span> &#123;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡å„ç§ç­–ç•¥çš„ä½¿ç”¨é¢‘ç‡</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. Token èŠ‚çœæ•ˆæœ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordTokenSavings</span><span class="params">(String sessionId, <span class="type">int</span> originalTokens, <span class="type">int</span> processedTokens)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">savingRatio</span> <span class="operator">=</span> (originalTokens - processedTokens) / (<span class="type">double</span>) originalTokens;</span><br><span class="line">        <span class="comment">// è®°å½• Token èŠ‚çœæ¯”ä¾‹</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. æ‘˜è¦è´¨é‡è¯„ä¼°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordSummaryMetrics</span><span class="params">(String sessionId, <span class="type">int</span> originalMessages, <span class="type">int</span> summaryTokens)</span> &#123;</span><br><span class="line">        <span class="comment">// è®°å½•æ‘˜è¦å‹ç¼©æ¯”ä¾‹</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4. ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordUserSatisfaction</span><span class="params">(String sessionId, <span class="type">boolean</span> contextLoss)</span> &#123;</span><br><span class="line">        <span class="comment">// è®°å½•ç”¨æˆ·æ˜¯å¦æ„Ÿå—åˆ°ä¸Šä¸‹æ–‡ä¸¢å¤±</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ’¡-ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ"><a href="#ğŸ’¡-ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ" class="headerlink" title="ğŸ’¡ ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ"></a>ğŸ’¡ ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ</h2><h3 id="11-â€œå½“å‰ä»£ç ä¸­ä½ çœ‹åˆ°å“ªäº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Ÿâ€"><a href="#11-â€œå½“å‰ä»£ç ä¸­ä½ çœ‹åˆ°å“ªäº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Ÿâ€" class="headerlink" title="11. â€œå½“å‰ä»£ç ä¸­ä½ çœ‹åˆ°å“ªäº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Ÿâ€"></a>11. â€œå½“å‰ä»£ç ä¸­ä½ çœ‹åˆ°å“ªäº›å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Ÿâ€</h3><p><strong>åŸºäºä»£ç åˆ†æçš„æ”¹è¿›å»ºè®®ï¼š</strong></p>
<ol>
<li><p><strong>ç¡¬ç¼–ç é—®é¢˜ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰ä»£ç ä¸­çš„ç¡¬ç¼–ç </span></span><br><span class="line">message.setTokenCount(<span class="number">100</span>); <span class="comment">// <span class="doctag">TODO:</span> è®¡ç®—å®é™…tokenæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºè®®æ”¹è¿›</span></span><br><span class="line">message.setTokenCount(tokenCalculator.calculateTokens(message.getContent()));</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¼‚å¸¸å¤„ç†ä¸å¤Ÿå®Œå–„ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰æ‘˜è¦ç”Ÿæˆæ²¡æœ‰å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="type">ChatResponse</span> <span class="variable">chatResponse</span> <span class="operator">=</span> chatLanguageModel.chat(Arrays.asList(systemMessage, userMessage));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºè®®å¢åŠ é‡è¯•æœºåˆ¶å’Œé™çº§ç­–ç•¥</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>é…ç½®éªŒè¯ç¼ºå¤±ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»ºè®®å¢åŠ é…ç½®æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">validateConfig</span><span class="params">(TokenOverflowConfig config)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.getMaxTokens() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;maxTokens must be positive&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (config.getSummaryThreshold() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;summaryThreshold must be positive&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="12-â€œå¦‚ä½•è®¾è®¡å•å…ƒæµ‹è¯•æ¥éªŒè¯ä¸åŒç­–ç•¥çš„æ­£ç¡®æ€§ï¼Ÿâ€"><a href="#12-â€œå¦‚ä½•è®¾è®¡å•å…ƒæµ‹è¯•æ¥éªŒè¯ä¸åŒç­–ç•¥çš„æ­£ç¡®æ€§ï¼Ÿâ€" class="headerlink" title="12. â€œå¦‚ä½•è®¾è®¡å•å…ƒæµ‹è¯•æ¥éªŒè¯ä¸åŒç­–ç•¥çš„æ­£ç¡®æ€§ï¼Ÿâ€"></a>12. â€œå¦‚ä½•è®¾è®¡å•å…ƒæµ‹è¯•æ¥éªŒè¯ä¸åŒç­–ç•¥çš„æ­£ç¡®æ€§ï¼Ÿâ€</h3><p><strong>åŸºäºç°æœ‰æµ‹è¯•çš„æ”¹è¿›ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenOverflowStrategyTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSlidingWindowStrategy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1. å‡†å¤‡æµ‹è¯•æ•°æ®</span></span><br><span class="line">        List&lt;TokenMessage&gt; messages = createTestMessages(<span class="number">20</span>, <span class="number">100</span>); <span class="comment">// 20æ¡æ¶ˆæ¯ï¼Œæ¯æ¡100token</span></span><br><span class="line">        <span class="type">TokenOverflowConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TokenOverflowConfig</span>();</span><br><span class="line">        config.setMaxTokens(<span class="number">1000</span>);  <span class="comment">// é™åˆ¶1000token</span></span><br><span class="line">        config.setReserveRatio(<span class="number">0.1</span>); <span class="comment">// é¢„ç•™10%</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. æ‰§è¡Œç­–ç•¥</span></span><br><span class="line">        <span class="type">SlidingWindowTokenOverflowStrategy</span> <span class="variable">strategy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SlidingWindowTokenOverflowStrategy</span>(config);</span><br><span class="line">        <span class="type">TokenProcessResult</span> <span class="variable">result</span> <span class="operator">=</span> strategy.process(messages, config);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. éªŒè¯ç»“æœ</span></span><br><span class="line">        assertThat(result.getRetainedMessages().size()).isLessThan(<span class="number">20</span>);</span><br><span class="line">        assertThat(calculateTotalTokens(result.getRetainedMessages())).isLessThanOrEqualTo(<span class="number">900</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. éªŒè¯ä¿ç•™çš„æ˜¯æœ€æ–°æ¶ˆæ¯</span></span><br><span class="line">        List&lt;TokenMessage&gt; retained = result.getRetainedMessages();</span><br><span class="line">        assertThat(retained.get(<span class="number">0</span>).getCreatedAt()).isAfter(messages.get(<span class="number">0</span>).getCreatedAt());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSummarizeStrategy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æµ‹è¯•æ‘˜è¦ç­–ç•¥çš„æ­£ç¡®æ€§</span></span><br><span class="line">        <span class="comment">// éªŒè¯æ‘˜è¦ç”Ÿæˆã€æ¶ˆæ¯ä¿ç•™ç­‰é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEdgeCases</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼šç©ºæ¶ˆæ¯åˆ—è¡¨ã€å•æ¡è¶…é•¿æ¶ˆæ¯ç­‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸŒŸ-å®é™…åº”ç”¨åœºæ™¯"><a href="#ğŸŒŸ-å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="ğŸŒŸ å®é™…åº”ç”¨åœºæ™¯"></a>ğŸŒŸ å®é™…åº”ç”¨åœºæ™¯</h2><h3 id="13-â€œä¸åŒç±»å‹çš„-Agent-åº”è¯¥ä½¿ç”¨ä»€ä¹ˆç­–ç•¥ï¼Ÿâ€"><a href="#13-â€œä¸åŒç±»å‹çš„-Agent-åº”è¯¥ä½¿ç”¨ä»€ä¹ˆç­–ç•¥ï¼Ÿâ€" class="headerlink" title="13. â€œä¸åŒç±»å‹çš„ Agent åº”è¯¥ä½¿ç”¨ä»€ä¹ˆç­–ç•¥ï¼Ÿâ€"></a>13. â€œä¸åŒç±»å‹çš„ Agent åº”è¯¥ä½¿ç”¨ä»€ä¹ˆç­–ç•¥ï¼Ÿâ€</h3><p><strong>åŸºäº AgentX çš„ Agent ç±»å‹åˆ†æï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ AgentEntity ä¸­å¯ä»¥æ ¹æ® Agent ç±»å‹è®¾ç½®é»˜è®¤ç­–ç•¥</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgentRecommendationService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> TokenOverflowStrategyEnum <span class="title function_">recommendStrategy</span><span class="params">(AgentType agentType)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (agentType) &#123;</span><br><span class="line">            <span class="keyword">case</span> CUSTOMER_SERVICE:</span><br><span class="line">                <span class="comment">// å®¢æœç±»ï¼šæ¯æ¬¡å¯¹è¯ç›¸å¯¹ç‹¬ç«‹ï¼Œä½¿ç”¨æ»‘åŠ¨çª—å£</span></span><br><span class="line">                <span class="keyword">return</span> TokenOverflowStrategyEnum.SLIDING_WINDOW;</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">case</span> PROGRAMMING_ASSISTANT:</span><br><span class="line">                <span class="comment">// ç¼–ç¨‹åŠ©æ‰‹ï¼šéœ€è¦è®°ä½ä»£ç ä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨æ‘˜è¦ç­–ç•¥</span></span><br><span class="line">                <span class="keyword">return</span> TokenOverflowStrategyEnum.SUMMARIZE;</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">case</span> CREATIVE_WRITING:</span><br><span class="line">                <span class="comment">// åˆ›ä½œåŠ©æ‰‹ï¼šéœ€è¦ä¿æŒåˆ›ä½œè¿è´¯æ€§ï¼Œä½¿ç”¨æ‘˜è¦ç­–ç•¥</span></span><br><span class="line">                <span class="keyword">return</span> TokenOverflowStrategyEnum.SUMMARIZE;</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">case</span> QUICK_QA:</span><br><span class="line">                <span class="comment">// å¿«é€Ÿé—®ç­”ï¼šä¸éœ€è¦å¤æ‚ä¸Šä¸‹æ–‡ç®¡ç†</span></span><br><span class="line">                <span class="keyword">return</span> TokenOverflowStrategyEnum.NONE;</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> TokenOverflowStrategyEnum.SLIDING_WINDOW;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™äº›å›ç­”éƒ½åŸºäº AgentX é¡¹ç›®çš„å®é™…ä»£ç å®ç°ï¼Œå±•ç¤ºäº†å¯¹ç³»ç»Ÿæ¶æ„çš„æ·±å…¥ç†è§£ä»¥åŠå®é™…çš„æŠ€æœ¯å®ç°ç»†èŠ‚ã€‚åœ¨é¢è¯•ä¸­ï¼Œç»“åˆå…·ä½“ä»£ç æ¥å›ç­”é—®é¢˜ä¼šæ›´æœ‰è¯´æœåŠ›ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/10/%E3%80%90Netty%E5%AD%A6%E4%B9%A0%E3%80%91ChannelHandlerContext%E5%92%8CPipeline/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/06/10/%E3%80%90Netty%E5%AD%A6%E4%B9%A0%E3%80%91ChannelHandlerContext%E5%92%8CPipeline/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-06-10T16:14:50+08:00">
                2025-06-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Netty-ChannelHandlerContext-å’Œ-Pipeline-ä½œç”¨"><a href="#Netty-ChannelHandlerContext-å’Œ-Pipeline-ä½œç”¨" class="headerlink" title="Netty ChannelHandlerContext å’Œ Pipeline ä½œç”¨"></a>Netty ChannelHandlerContext å’Œ Pipeline ä½œç”¨</h1><p><em>Exported on 2025&#x2F;6&#x2F;10 at GMT+8 16:13:31 from Cursor (1.0.0)</em></p>
<hr>
<p><strong>User</strong></p>
<p>èƒ½åˆ—ä¸¾è¯´æ˜æ‰€æœ‰Nettyä¸­ChannelHandlerContextçš„æ¥å£ä½œç”¨handleræ„æˆçš„Pipelineié“¾è·¯çš„æ•ˆæœå—</p>
<hr>
<p><strong>Cursor</strong></p>
<p>æˆ‘æ¥å¸®æ‚¨è¯¦ç»†åˆ†æNettyä¸­ChannelHandlerContextçš„æ¥å£ä½œç”¨å’ŒPipelineé“¾è·¯æ•ˆæœã€‚é¦–å…ˆè®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹æ‚¨é¡¹ç›®ä¸­çš„Nettyç›¸å…³ä»£ç ã€‚</p>
<p>åŸºäºæ‚¨é¡¹ç›®ä¸­çš„ä»£ç ç¤ºä¾‹ï¼Œæˆ‘æ¥è¯¦ç»†è¯´æ˜Nettyä¸­ChannelHandlerContextçš„æ¥å£ä½œç”¨ä»¥åŠHandleræ„æˆçš„Pipelineé“¾è·¯æ•ˆæœï¼š</p>
<h2 id="ChannelHandlerContextæ ¸å¿ƒæ¥å£ä½œç”¨"><a href="#ChannelHandlerContextæ ¸å¿ƒæ¥å£ä½œç”¨" class="headerlink" title="ChannelHandlerContextæ ¸å¿ƒæ¥å£ä½œç”¨"></a>ChannelHandlerContextæ ¸å¿ƒæ¥å£ä½œç”¨</h2><h3 id="1-äº‹ä»¶ä¼ æ’­æ¥å£"><a href="#1-äº‹ä»¶ä¼ æ’­æ¥å£" class="headerlink" title="1. äº‹ä»¶ä¼ æ’­æ¥å£"></a>1. äº‹ä»¶ä¼ æ’­æ¥å£</h3><p>ChannelHandlerContextæ˜¯Handlerä¹‹é—´çš„æ¡¥æ¢ï¼Œæä¾›äº†å…³é”®çš„äº‹ä»¶ä¼ æ’­æ–¹æ³•ï¼š</p>
<p><strong>å…¥ç«™äº‹ä»¶ä¼ æ’­ï¼ˆInboundï¼‰ï¼š</strong></p>
<ul>
<li><code>fireChannelRegistered()</code> - ä¼ æ’­Channelæ³¨å†Œäº‹ä»¶</li>
<li><code>fireChannelActive()</code> - ä¼ æ’­è¿æ¥æ¿€æ´»äº‹ä»¶</li>
<li><code>fireChannelRead(Object msg)</code> - ä¼ æ’­æ•°æ®è¯»å–äº‹ä»¶</li>
<li><code>fireChannelReadComplete()</code> - ä¼ æ’­è¯»å–å®Œæˆäº‹ä»¶</li>
<li><code>fireChannelInactive()</code> - ä¼ æ’­è¿æ¥æ–­å¼€äº‹ä»¶</li>
<li><code>fireExceptionCaught(Throwable cause)</code> - ä¼ æ’­å¼‚å¸¸äº‹ä»¶</li>
</ul>
<p><strong>å‡ºç«™æ“ä½œæ¥å£ï¼ˆOutboundï¼‰ï¼š</strong></p>
<ul>
<li><code>write(Object msg)</code> - å†™å…¥æ•°æ®åˆ°ç¼“å†²åŒº</li>
<li><code>writeAndFlush(Object msg)</code> - å†™å…¥å¹¶ç«‹å³å‘é€</li>
<li><code>flush()</code> - åˆ·æ–°ç¼“å†²åŒº</li>
<li><code>close()</code> - å…³é—­è¿æ¥</li>
<li><code>connect()</code> - å»ºç«‹è¿æ¥</li>
</ul>
<h3 id="2-ä¸Šä¸‹æ–‡è®¿é—®æ¥å£"><a href="#2-ä¸Šä¸‹æ–‡è®¿é—®æ¥å£" class="headerlink" title="2. ä¸Šä¸‹æ–‡è®¿é—®æ¥å£"></a>2. ä¸Šä¸‹æ–‡è®¿é—®æ¥å£</h3><ul>
<li><code>channel()</code> - è·å–å…³è”çš„Channel</li>
<li><code>pipeline()</code> - è·å–Pipelineå¼•ç”¨</li>
<li><code>handler()</code> - è·å–å½“å‰Handler</li>
<li><code>name()</code> - è·å–Handleråç§°</li>
<li><code>executor()</code> - è·å–æ‰§è¡Œå™¨</li>
</ul>
<h2 id="Pipelineé“¾è·¯å·¥ä½œæ•ˆæœ"><a href="#Pipelineé“¾è·¯å·¥ä½œæ•ˆæœ" class="headerlink" title="Pipelineé“¾è·¯å·¥ä½œæ•ˆæœ"></a>Pipelineé“¾è·¯å·¥ä½œæ•ˆæœ</h2><h3 id="1-Handleræ‰§è¡Œé¡ºåº"><a href="#1-Handleræ‰§è¡Œé¡ºåº" class="headerlink" title="1. Handleræ‰§è¡Œé¡ºåº"></a>1. Handleræ‰§è¡Œé¡ºåº</h3><p>æ ¹æ®æ‚¨é¡¹ç›®ä¸­çš„ <code>PipelineServer.java</code> ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pipelineé…ç½®é¡ºåº</span></span><br><span class="line">pipeline.addLast(<span class="string">&quot;decoder&quot;</span>, <span class="keyword">new</span> <span class="title class_">StringDecoder</span>(CharsetUtil.UTF_8));</span><br><span class="line">pipeline.addLast(<span class="string">&quot;inbound1&quot;</span>, <span class="keyword">new</span> <span class="title class_">InboundHandler1</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;inbound2&quot;</span>, <span class="keyword">new</span> <span class="title class_">InboundHandler2</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;business&quot;</span>, <span class="keyword">new</span> <span class="title class_">BusinessHandler</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;outbound1&quot;</span>, <span class="keyword">new</span> <span class="title class_">OutboundHandler1</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;outbound2&quot;</span>, <span class="keyword">new</span> <span class="title class_">OutboundHandler2</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;encoder&quot;</span>, <span class="keyword">new</span> <span class="title class_">StringEncoder</span>(CharsetUtil.UTF_8));</span><br></pre></td></tr></table></figure>

<p><strong>å…¥ç«™äº‹ä»¶æµï¼ˆæ•°æ®æ¥æ”¶ï¼‰ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Socketæ•°æ® â†’ decoder â†’ inbound1 â†’ inbound2 â†’ business â†’ ä¸šåŠ¡å¤„ç†</span><br></pre></td></tr></table></figure>

<p><strong>å‡ºç«™äº‹ä»¶æµï¼ˆæ•°æ®å‘é€ï¼‰ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸šåŠ¡å¤„ç† â†’ outbound2 â†’ outbound1 â†’ encoder â†’ Socketå‘é€</span><br></pre></td></tr></table></figure>

<h3 id="2-ä¸¤ç§ä¼ æ’­æ–¹å¼çš„åŒºåˆ«"><a href="#2-ä¸¤ç§ä¼ æ’­æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="2. ä¸¤ç§ä¼ æ’­æ–¹å¼çš„åŒºåˆ«"></a>2. ä¸¤ç§ä¼ æ’­æ–¹å¼çš„åŒºåˆ«</h3><p>ä»æ‚¨é¡¹ç›®çš„ <code>BusinessHandler.java</code> ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼1ï¼šä»å½“å‰ä½ç½®å¼€å§‹çš„Outboundé“¾</span></span><br><span class="line">ctx.writeAndFlush(response);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2ï¼šä»Pipelineå°¾éƒ¨å¼€å§‹çš„å®Œæ•´Outboundé“¾</span></span><br><span class="line">ctx.channel().writeAndFlush(response);</span><br></pre></td></tr></table></figure>

<p><strong>ctx.writeAndFlush()æ•ˆæœï¼š</strong></p>
<ul>
<li>ä»å½“å‰Handlerä½ç½®å‘å‰ä¼ æ’­</li>
<li>è·³è¿‡å‰é¢çš„OutboundHandler</li>
<li>æ•ˆç‡æ›´é«˜ï¼Œä½†å¯èƒ½é”™è¿‡æŸäº›å¤„ç†</li>
</ul>
<p><strong>ctx.channel().writeAndFlush()æ•ˆæœï¼š</strong></p>
<ul>
<li>ä»Pipelineå°¾éƒ¨å¼€å§‹å®Œæ•´ä¼ æ’­</li>
<li>ç»è¿‡æ‰€æœ‰OutboundHandler</li>
<li>ä¿è¯å®Œæ•´çš„å¤„ç†é“¾è·¯</li>
</ul>
<h3 id="3-å®é™…è¿è¡Œæ•ˆæœæ¼”ç¤º"><a href="#3-å®é™…è¿è¡Œæ•ˆæœæ¼”ç¤º" class="headerlink" title="3. å®é™…è¿è¡Œæ•ˆæœæ¼”ç¤º"></a>3. å®é™…è¿è¡Œæ•ˆæœæ¼”ç¤º</h3><p>æ ¹æ®æ‚¨é¡¹ç›®çš„ <code>NettyWorkflowDemo.java</code>ï¼Œå½“å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ—¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;\n=== æœåŠ¡å™¨ç«¯äº‹ä»¶: channelRead (InboundHandler) ===&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;   æ¶ˆæ¯ç»è¿‡çš„Handler: decoder -&gt; serverHandler&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> <span class="string">&quot;Echo: &quot;</span> + msg;</span><br><span class="line">    ctx.writeAndFlush(response);</span><br><span class="line">    System.out.println(<span class="string">&quot;   å“åº”å°†ç»è¿‡çš„Handler: serverHandler -&gt; encoder&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-çº¿ç¨‹æ¨¡å‹æ•ˆæœ"><a href="#4-çº¿ç¨‹æ¨¡å‹æ•ˆæœ" class="headerlink" title="4. çº¿ç¨‹æ¨¡å‹æ•ˆæœ"></a>4. çº¿ç¨‹æ¨¡å‹æ•ˆæœ</h3><p>Pipelineä¸­çš„æ‰€æœ‰Handleréƒ½åœ¨åŒä¸€ä¸ªEventLoopçº¿ç¨‹ä¸­æ‰§è¡Œï¼š</p>
<ul>
<li><strong>å•çº¿ç¨‹é¡ºåºæ‰§è¡Œ</strong>ï¼šé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜</li>
<li><strong>æ— é”è®¾è®¡</strong>ï¼šæé«˜æ€§èƒ½</li>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šé«˜æ•ˆå¤„ç†å¤§é‡è¿æ¥</li>
</ul>
<h3 id="5-å¼‚å¸¸ä¼ æ’­æ•ˆæœ"><a href="#5-å¼‚å¸¸ä¼ æ’­æ•ˆæœ" class="headerlink" title="5. å¼‚å¸¸ä¼ æ’­æ•ˆæœ"></a>5. å¼‚å¸¸ä¼ æ’­æ•ˆæœ</h3><p>å½“Handlerä¸­å‘ç”Ÿå¼‚å¸¸æ—¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> &#123;</span><br><span class="line">    cause.printStackTrace();</span><br><span class="line">    ctx.close(); <span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼‚å¸¸ä¼šæ²¿ç€Pipelineå‘åä¼ æ’­ï¼Œç›´åˆ°è¢«å¤„ç†æˆ–åˆ°è¾¾æœ«å°¾ã€‚</p>
<h2 id="Pipelineé“¾è·¯çš„æ ¸å¿ƒä¼˜åŠ¿"><a href="#Pipelineé“¾è·¯çš„æ ¸å¿ƒä¼˜åŠ¿" class="headerlink" title="Pipelineé“¾è·¯çš„æ ¸å¿ƒä¼˜åŠ¿"></a>Pipelineé“¾è·¯çš„æ ¸å¿ƒä¼˜åŠ¿</h2><ol>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šæ¯ä¸ªHandlerä¸“æ³¨å•ä¸€åŠŸèƒ½</li>
<li><strong>å¯ç»„åˆæ€§</strong>ï¼šçµæ´»é…ç½®Handlerç»„åˆ</li>
<li><strong>å¯é‡ç”¨æ€§</strong>ï¼šHandlerå¯åœ¨ä¸åŒPipelineä¸­å¤ç”¨</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šå•çº¿ç¨‹æ— é”è®¾è®¡</li>
<li><strong>æ˜“æ‰©å±•</strong>ï¼šæ·»åŠ æ–°åŠŸèƒ½åªéœ€æ–°å¢Handler</li>
</ol>
<p>è¿™ç§è®¾è®¡ä½¿Nettyèƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¤æ‚çš„ç½‘ç»œé€šä¿¡åœºæ™¯ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pipelineé…ç½®é¡ºåº</span></span><br><span class="line">pipeline.addLast(<span class="string">&quot;decoder&quot;</span>, <span class="keyword">new</span> <span class="title class_">StringDecoder</span>(CharsetUtil.UTF_8));</span><br><span class="line">pipeline.addLast(<span class="string">&quot;inbound1&quot;</span>, <span class="keyword">new</span> <span class="title class_">InboundHandler1</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;inbound2&quot;</span>, <span class="keyword">new</span> <span class="title class_">InboundHandler2</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;business&quot;</span>, <span class="keyword">new</span> <span class="title class_">BusinessHandler</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;outbound1&quot;</span>, <span class="keyword">new</span> <span class="title class_">OutboundHandler1</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;outbound2&quot;</span>, <span class="keyword">new</span> <span class="title class_">OutboundHandler2</span>());</span><br><span class="line">pipeline.addLast(<span class="string">&quot;encoder&quot;</span>, <span class="keyword">new</span> <span class="title class_">StringEncoder</span>(CharsetUtil.UTF_8));</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Socketæ•°æ® â†’ decoder â†’ inbound1 â†’ inbound2 â†’ business â†’ ä¸šåŠ¡å¤„ç†</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸šåŠ¡å¤„ç† â†’ outbound2 â†’ outbound1 â†’ encoder â†’ Socketå‘é€</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼1ï¼šä»å½“å‰ä½ç½®å¼€å§‹çš„Outboundé“¾</span></span><br><span class="line">ctx.writeAndFlush(response);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2ï¼šä»Pipelineå°¾éƒ¨å¼€å§‹çš„å®Œæ•´Outboundé“¾</span></span><br><span class="line">ctx.channel().writeAndFlush(response);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">channelRead</span><span class="params">(ChannelHandlerContext ctx, Object msg)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;\n=== æœåŠ¡å™¨ç«¯äº‹ä»¶: channelRead (InboundHandler) ===&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;   æ¶ˆæ¯ç»è¿‡çš„Handler: decoder -&gt; serverHandler&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> <span class="string">&quot;Echo: &quot;</span> + msg;</span><br><span class="line">    ctx.writeAndFlush(response);</span><br><span class="line">    System.out.println(<span class="string">&quot;   å“åº”å°†ç»è¿‡çš„Handler: serverHandler -&gt; encoder&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> &#123;</span><br><span class="line">    cause.printStackTrace();</span><br><span class="line">    ctx.close(); <span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/05/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E6%9E%B6%E6%9E%84%E4%BB%A5%E5%8F%8A%E4%BA%A4%E4%BA%92%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/06/05/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E6%9E%B6%E6%9E%84%E4%BB%A5%E5%8F%8A%E4%BA%A4%E4%BA%92%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-06-05T09:53:08+08:00">
                2025-06-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æˆ‘å°†ä½¿ç”¨ä¸¤ç§æ–¹å¼æ¥å±•ç¤ºJVMçš„ä¸»è¦æ¶æ„ï¼šç›®å½•ç»“æ„å’ŒMermaidå›¾ã€‚</p>
<ol>
<li><p><strong>ç›®å½•ç»“æ„å½¢å¼</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">JVMæ¶æ„</span><br><span class="line">â”œâ”€â”€ ç±»åŠ è½½å­ç³»ç»Ÿ (Class Loading Subsystem)</span><br><span class="line">â”‚   â”œâ”€â”€ åŠ è½½ (Loading)</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ Bootstrap ClassLoader</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ Extension ClassLoader</span><br><span class="line">â”‚   â”‚   â””â”€â”€ Application ClassLoader</span><br><span class="line">â”‚   â”œâ”€â”€ é“¾æ¥ (Linking)</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ éªŒè¯ (Verification)</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ å‡†å¤‡ (Preparation)</span><br><span class="line">â”‚   â”‚   â””â”€â”€ è§£æ (Resolution)</span><br><span class="line">â”‚   â””â”€â”€ åˆå§‹åŒ– (Initialization)</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ è¿è¡Œæ—¶æ•°æ®åŒº (Runtime Data Areas)</span><br><span class="line">â”‚   â”œâ”€â”€ æ–¹æ³•åŒº (Method Area) - çº¿ç¨‹å…±äº«</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ ç±»ä¿¡æ¯</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ å¸¸é‡</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ é™æ€å˜é‡</span><br><span class="line">â”‚   â”‚   â””â”€â”€ JITç¼–è¯‘ä»£ç </span><br><span class="line">â”‚   â”œâ”€â”€ å †åŒº (Heap) - çº¿ç¨‹å…±äº«</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ æ–°ç”Ÿä»£ (Young Generation)</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ EdenåŒº</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ Survivor 0</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ Survivor 1</span><br><span class="line">â”‚   â”‚   â””â”€â”€ è€å¹´ä»£ (Old Generation)</span><br><span class="line">â”‚   â”œâ”€â”€ æ ˆåŒº (Stack) - çº¿ç¨‹ç§æœ‰</span><br><span class="line">â”‚   â”‚   â””â”€â”€ æ ˆå¸§ (Stack Frame)</span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ å±€éƒ¨å˜é‡è¡¨</span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ æ“ä½œæ•°æ ˆ</span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ åŠ¨æ€é“¾æ¥</span><br><span class="line">â”‚   â”‚       â””â”€â”€ è¿”å›åœ°å€</span><br><span class="line">â”‚   â”œâ”€â”€ ç¨‹åºè®¡æ•°å™¨ (PC Register) - çº¿ç¨‹ç§æœ‰</span><br><span class="line">â”‚   â””â”€â”€ æœ¬åœ°æ–¹æ³•æ ˆ (Native Method Stack) - çº¿ç¨‹ç§æœ‰</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ æ‰§è¡Œå¼•æ“ (Execution Engine)</span><br><span class="line">â”‚   â”œâ”€â”€ è§£é‡Šå™¨ (Interpreter)</span><br><span class="line">â”‚   â”œâ”€â”€ JITç¼–è¯‘å™¨ (JIT Compiler)</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ ä¸­é—´ä»£ç ç”Ÿæˆå™¨</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ ä»£ç ä¼˜åŒ–å™¨</span><br><span class="line">â”‚   â”‚   â””â”€â”€ ç›®æ ‡ä»£ç ç”Ÿæˆå™¨</span><br><span class="line">â”‚   â””â”€â”€ åƒåœ¾å›æ”¶å™¨ (Garbage Collector)</span><br><span class="line">â”‚       â”œâ”€â”€ Serial GC</span><br><span class="line">â”‚       â”œâ”€â”€ Parallel GC</span><br><span class="line">â”‚       â”œâ”€â”€ CMS GC</span><br><span class="line">â”‚       â””â”€â”€ G1 GC</span><br><span class="line">â”‚</span><br><span class="line">â””â”€â”€ æœ¬åœ°æ–¹æ³•æ¥å£ (Native Method Interface)</span><br><span class="line">    â””â”€â”€ æœ¬åœ°æ–¹æ³•åº“ (Native Method Libraries)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Mermaidå›¾å½¢å¼</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    JVM[JVMæ¶æ„]</span><br><span class="line">    </span><br><span class="line">    %% ç±»åŠ è½½å­ç³»ç»Ÿ</span><br><span class="line">    CLS[ç±»åŠ è½½å­ç³»ç»Ÿ]</span><br><span class="line">    L[åŠ è½½]</span><br><span class="line">    LK[é“¾æ¥]</span><br><span class="line">    I[åˆå§‹åŒ–]</span><br><span class="line">    </span><br><span class="line">    %% è¿è¡Œæ—¶æ•°æ®åŒº</span><br><span class="line">    RDA[è¿è¡Œæ—¶æ•°æ®åŒº]</span><br><span class="line">    MA[æ–¹æ³•åŒº]</span><br><span class="line">    HP[å †]</span><br><span class="line">    STK[æ ˆ]</span><br><span class="line">    PC[ç¨‹åºè®¡æ•°å™¨]</span><br><span class="line">    NMS[æœ¬åœ°æ–¹æ³•æ ˆ]</span><br><span class="line">    </span><br><span class="line">    %% æ‰§è¡Œå¼•æ“</span><br><span class="line">    EE[æ‰§è¡Œå¼•æ“]</span><br><span class="line">    INT[è§£é‡Šå™¨]</span><br><span class="line">    JIT[JITç¼–è¯‘å™¨]</span><br><span class="line">    GC[åƒåœ¾å›æ”¶å™¨]</span><br><span class="line">    </span><br><span class="line">    %% æœ¬åœ°æ–¹æ³•æ¥å£</span><br><span class="line">    NMI[æœ¬åœ°æ–¹æ³•æ¥å£]</span><br><span class="line">    NML[æœ¬åœ°æ–¹æ³•åº“]</span><br><span class="line">    </span><br><span class="line">    %% è¿æ¥å…³ç³»</span><br><span class="line">    JVM --&gt; CLS</span><br><span class="line">    JVM --&gt; RDA</span><br><span class="line">    JVM --&gt; EE</span><br><span class="line">    JVM --&gt; NMI</span><br><span class="line">    </span><br><span class="line">    %% ç±»åŠ è½½å­ç³»ç»Ÿè¯¦ç»†</span><br><span class="line">    CLS --&gt; L</span><br><span class="line">    CLS --&gt; LK</span><br><span class="line">    CLS --&gt; I</span><br><span class="line">    L --&gt; BCL[Bootstrap ClassLoader]</span><br><span class="line">    L --&gt; ECL[Extension ClassLoader]</span><br><span class="line">    L --&gt; ACL[Application ClassLoader]</span><br><span class="line">    LK --&gt; V[éªŒè¯]</span><br><span class="line">    LK --&gt; P[å‡†å¤‡]</span><br><span class="line">    LK --&gt; R[è§£æ]</span><br><span class="line">    </span><br><span class="line">    %% è¿è¡Œæ—¶æ•°æ®åŒºè¯¦ç»†</span><br><span class="line">    RDA --&gt; MA</span><br><span class="line">    RDA --&gt; HP</span><br><span class="line">    RDA --&gt; STK</span><br><span class="line">    RDA --&gt; PC</span><br><span class="line">    RDA --&gt; NMS</span><br><span class="line">    </span><br><span class="line">    HP --&gt; YG[æ–°ç”Ÿä»£]</span><br><span class="line">    HP --&gt; OG[è€å¹´ä»£]</span><br><span class="line">    YG --&gt; Eden</span><br><span class="line">    YG --&gt; S0[Survivor 0]</span><br><span class="line">    YG --&gt; S1[Survivor 1]</span><br><span class="line">    </span><br><span class="line">    STK --&gt; SF[æ ˆå¸§]</span><br><span class="line">    SF --&gt; LVT[å±€éƒ¨å˜é‡è¡¨]</span><br><span class="line">    SF --&gt; OS[æ“ä½œæ•°æ ˆ]</span><br><span class="line">    SF --&gt; DL[åŠ¨æ€é“¾æ¥]</span><br><span class="line">    SF --&gt; RA[è¿”å›åœ°å€]</span><br><span class="line">    </span><br><span class="line">    %% æ‰§è¡Œå¼•æ“è¯¦ç»†</span><br><span class="line">    EE --&gt; INT</span><br><span class="line">    EE --&gt; JIT</span><br><span class="line">    EE --&gt; GC</span><br><span class="line">    </span><br><span class="line">    JIT --&gt; ICG[ä¸­é—´ä»£ç ç”Ÿæˆå™¨]</span><br><span class="line">    JIT --&gt; CO[ä»£ç ä¼˜åŒ–å™¨]</span><br><span class="line">    JIT --&gt; TCG[ç›®æ ‡ä»£ç ç”Ÿæˆå™¨]</span><br><span class="line">    </span><br><span class="line">    GC --&gt; SGC[Serial GC]</span><br><span class="line">    GC --&gt; PGC[Parallel GC]</span><br><span class="line">    GC --&gt; CMS[CMS GC]</span><br><span class="line">    GC --&gt; G1[G1 GC]</span><br><span class="line">    </span><br><span class="line">    %% æœ¬åœ°æ–¹æ³•æ¥å£è¯¦ç»†</span><br><span class="line">    NMI --&gt; NML</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä¸»è¦ç»„ä»¶ä¹‹é—´çš„äº¤äº’æµç¨‹</strong>ï¼š</p>
</li>
<li><p><strong>ç±»çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p>
<ul>
<li>æºä»£ç (.java) -&gt; å­—èŠ‚ç (.class) -&gt; ç±»åŠ è½½ -&gt; é“¾æ¥ -&gt; åˆå§‹åŒ– -&gt; ä½¿ç”¨ -&gt; å¸è½½</li>
</ul>
</li>
<li><p><strong>æ–¹æ³•è°ƒç”¨æµç¨‹</strong>ï¼š</p>
<ul>
<li>ä»£ç å®šä½ -&gt; å¸¸é‡æ± æŸ¥æ‰¾ -&gt; æ–¹æ³•åŒºè·å–ä¿¡æ¯ -&gt; åˆ›å»ºæ ˆå¸§ -&gt; æ‰§è¡Œå­—èŠ‚ç </li>
</ul>
</li>
<li><p><strong>å†…å­˜ç®¡ç†æµç¨‹</strong>ï¼š</p>
<ul>
<li>å¯¹è±¡åˆ›å»º -&gt; æ–°ç”Ÿä»£åˆ†é… -&gt; åƒåœ¾å›æ”¶ -&gt; å¯¹è±¡æ™‹å‡ -&gt; è€å¹´ä»£å›æ”¶</li>
</ul>
</li>
<li><p><strong>ä»£ç æ‰§è¡Œä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>è§£é‡Šæ‰§è¡Œ -&gt; çƒ­ç‚¹æ£€æµ‹ -&gt; JITç¼–è¯‘ -&gt; æœ¬åœ°ä»£ç æ‰§è¡Œ</li>
</ul>
</li>
</ol>
<p>è¿™ä¸ªæ¶æ„å±•ç¤ºäº†JVMçš„å››ä¸ªä¸»è¦ç»„ä»¶ï¼š</p>
<ol>
<li><strong>ç±»åŠ è½½å­ç³»ç»Ÿ</strong>ï¼šè´Ÿè´£åŠ è½½ã€é“¾æ¥å’Œåˆå§‹åŒ–ç±»</li>
<li><strong>è¿è¡Œæ—¶æ•°æ®åŒº</strong>ï¼šç®¡ç†JVMçš„å†…å­˜ç»“æ„</li>
<li><strong>æ‰§è¡Œå¼•æ“</strong>ï¼šè´Ÿè´£æ‰§è¡Œå­—èŠ‚ç å’Œä¼˜åŒ–</li>
<li><strong>æœ¬åœ°æ–¹æ³•æ¥å£</strong>ï¼šå¤„ç†ä¸æœ¬åœ°ä»£ç çš„äº¤äº’</li>
</ol>
<p>æ¯ä¸ªç»„ä»¶éƒ½æœ‰å…¶ç‰¹å®šçš„èŒè´£ï¼Œå®ƒä»¬ååŒå·¥ä½œç¡®ä¿Javaç¨‹åºèƒ½å¤Ÿæ­£ç¡®ã€é«˜æ•ˆåœ°è¿è¡Œã€‚è¿™ç§æ¨¡å—åŒ–çš„è®¾è®¡ä½¿å¾—JVMèƒ½å¤Ÿåœ¨ä¸åŒå¹³å°ä¸Šæä¾›ä¸€è‡´çš„æ‰§è¡Œç¯å¢ƒï¼ŒåŒæ—¶ä¹Ÿä¾¿äºä¼˜åŒ–å’Œç»´æŠ¤ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/05/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E6%96%B9%E6%B3%95%E5%8C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/06/05/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E6%96%B9%E6%B3%95%E5%8C%BA/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-06-05T09:29:13+08:00">
                2025-06-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è®©æˆ‘è¯¦ç»†è§£é‡Šæ–¹æ³•åŒºï¼ˆMethod Areaï¼‰çš„æ¦‚å¿µå’Œä½ç½®ã€‚</p>
<p>åœ¨JVMçš„å†…å­˜ç»“æ„ä¸­ï¼Œæ–¹æ³•åŒºæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬é€šè¿‡JVMçš„æ•´ä½“å†…å­˜ç»“æ„æ¥ç†è§£ï¼š</p>
<ol>
<li><p><strong>JVMå†…å­˜ç»“æ„</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">JVMå†…å­˜</span><br><span class="line">â”œâ”€â”€ å †åŒºï¼ˆHeapï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ æ–°ç”Ÿä»£</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ EdenåŒº</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ Survivor 0</span><br><span class="line">â”‚   â”‚   â””â”€â”€ Survivor 1</span><br><span class="line">â”‚   â””â”€â”€ è€å¹´ä»£</span><br><span class="line">â”œâ”€â”€ æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ ç±»ä¿¡æ¯</span><br><span class="line">â”‚   â”œâ”€â”€ å¸¸é‡</span><br><span class="line">â”‚   â”œâ”€â”€ é™æ€å˜é‡</span><br><span class="line">â”‚   â””â”€â”€ å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç </span><br><span class="line">â”œâ”€â”€ ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰</span><br><span class="line">â””â”€â”€ JVMæ ˆï¼ˆJVM Stackï¼‰</span><br><span class="line">    â”œâ”€â”€ æ ˆå¸§1</span><br><span class="line">    â”œâ”€â”€ æ ˆå¸§2</span><br><span class="line">    â””â”€â”€ æ ˆå¸§3</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æ–¹æ³•åŒºçš„æ¼”è¿›</strong>ï¼š</p>
</li>
</ol>
<ul>
<li><p><strong>JDK 1.7ä¹‹å‰</strong>ï¼š</p>
<ul>
<li>æ–¹æ³•åŒºåœ¨æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰ä¸­</li>
<li>å’Œå †åŒºè¿ç»­</li>
<li>æœ‰å›ºå®šå¤§å°é™åˆ¶</li>
</ul>
</li>
<li><p><strong>JDK 1.8åŠä¹‹å</strong>ï¼š</p>
<ul>
<li>æ–¹æ³•åŒºåœ¨å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰ä¸­</li>
<li>ç›´æ¥ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼ˆNative Memoryï¼‰</li>
<li>ä¸å†å—JVMå †å†…å­˜çš„é™åˆ¶</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>åœ¨æˆ‘ä»¬çš„mini-jvmä¸­æŸ¥çœ‹ç›¸å…³å®ç°</strong>ï¼š</li>
</ol>
<p>Search filesâ€¦<br>åœ¨æˆ‘ä»¬çš„mini-jvmå®ç°ä¸­ï¼Œæ–¹æ³•åŒºçš„æ¦‚å¿µä¸»è¦ä½“ç°åœ¨<code>ClassFile</code>å¯¹è±¡ä¸­ï¼Œå®ƒåŒ…å«äº†ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æ–¹æ³•åŒºçš„ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ol>
<li><p><strong>æ–¹æ³•åŒºå­˜å‚¨çš„å†…å®¹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•åŒº</span><br><span class="line">â”œâ”€â”€ ç±»å‹ä¿¡æ¯</span><br><span class="line">â”‚   â”œâ”€â”€ ç±»å</span><br><span class="line">â”‚   â”œâ”€â”€ ä¿®é¥°ç¬¦</span><br><span class="line">â”‚   â”œâ”€â”€ çˆ¶ç±»ä¿¡æ¯</span><br><span class="line">â”‚   â””â”€â”€ æ¥å£ä¿¡æ¯</span><br><span class="line">â”œâ”€â”€ æ–¹æ³•ä¿¡æ¯</span><br><span class="line">â”‚   â”œâ”€â”€ æ–¹æ³•å</span><br><span class="line">â”‚   â”œâ”€â”€ è¿”å›ç±»å‹</span><br><span class="line">â”‚   â”œâ”€â”€ å‚æ•°åˆ—è¡¨</span><br><span class="line">â”‚   â””â”€â”€ æ–¹æ³•å­—èŠ‚ç </span><br><span class="line">â”œâ”€â”€ å­—æ®µä¿¡æ¯</span><br><span class="line">â”‚   â”œâ”€â”€ å­—æ®µå</span><br><span class="line">â”‚   â”œâ”€â”€ ç±»å‹</span><br><span class="line">â”‚   â””â”€â”€ ä¿®é¥°ç¬¦</span><br><span class="line">â””â”€â”€ å…¶ä»–</span><br><span class="line">    â”œâ”€â”€ è¿è¡Œæ—¶å¸¸é‡æ± </span><br><span class="line">    â”œâ”€â”€ é™æ€å˜é‡</span><br><span class="line">    â””â”€â”€ JITç¼–è¯‘çš„æœ¬åœ°ä»£ç </span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æ–¹æ³•åŒºçš„ç‰¹ç‚¹</strong>ï¼š</p>
</li>
</ol>
<ul>
<li>çº¿ç¨‹å…±äº«ï¼šæ‰€æœ‰çº¿ç¨‹å…±äº«æ–¹æ³•åŒº</li>
<li>åŠ¨æ€æ€§ï¼šè¿è¡Œæ—¶ä¼šåŠ¨æ€åŠ è½½æ–°çš„ç±»</li>
<li>åƒåœ¾å›æ”¶ï¼šä¸»è¦é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶å’Œç±»çš„å¸è½½</li>
</ul>
<ol start="3">
<li><p><strong>åœ¨mini-jvmä¸­çš„ä½“ç°</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»åŠ è½½æ—¶ï¼Œå°†ç±»ä¿¡æ¯åŠ è½½åˆ°&quot;æ–¹æ³•åŒº&quot;</span></span><br><span class="line"><span class="keyword">public</span> ClassFile <span class="title function_">loadClass</span><span class="params">(String fqcn)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    <span class="keyword">return</span> classPath.stream()</span><br><span class="line">        .map(path -&gt; tryLoad(path, fqcn))</span><br><span class="line">        .filter(Objects::nonNull)</span><br><span class="line">        .findAny()</span><br><span class="line">        .orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">ClassNotFoundException</span>(fqcn + <span class="string">&quot;æ‰¾ä¸åˆ°&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä»&quot;æ–¹æ³•åŒº&quot;è·å–æ–¹æ³•ä¿¡æ¯</span></span><br><span class="line"><span class="type">MethodInfo</span> <span class="variable">finalMethodInfo</span> <span class="operator">=</span> classFile.getMethods(methodName).get(<span class="number">0</span>);</span><br><span class="line"><span class="type">StackFrame</span> <span class="variable">stackFrame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StackFrame</span>(finalMethodInfo, classFile.getConstantPool(), args);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æ–¹æ³•åŒºçš„è®¿é—®è¿‡ç¨‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Javaä»£ç è°ƒç”¨æ–¹æ³•</span><br><span class="line">     â†“</span><br><span class="line">æŸ¥æ‰¾å¸¸é‡æ± ä¸­çš„æ–¹æ³•å¼•ç”¨</span><br><span class="line">     â†“</span><br><span class="line">åˆ°æ–¹æ³•åŒºæ‰¾åˆ°æ–¹æ³•çš„å…·ä½“å®ç°</span><br><span class="line">     â†“</span><br><span class="line">åˆ›å»ºæ ˆå¸§</span><br><span class="line">     â†“</span><br><span class="line">æ‰§è¡Œæ–¹æ³•çš„å­—èŠ‚ç </span><br></pre></td></tr></table></figure></li>
</ol>
<p>ç”¨ç”ŸåŠ¨çš„æ¯”å–»æ¥è¯´ï¼š</p>
<p>æ–¹æ³•åŒºå°±åƒä¸€ä¸ª<strong>å›¾ä¹¦é¦†</strong>ï¼š</p>
<ul>
<li><p><strong>ä¹¦æ¶</strong>ï¼ˆç±»ä¿¡æ¯å­˜å‚¨åŒºï¼‰ï¼š</p>
<ul>
<li>æ¯ä¸ªç±»å°±åƒä¸€æœ¬ä¹¦</li>
<li>ä¹¦çš„ç›®å½•å°±æ˜¯ç±»çš„ç»“æ„ä¿¡æ¯</li>
<li>ä¹¦çš„å†…å®¹å°±æ˜¯ç±»çš„æ–¹æ³•å®ç°</li>
</ul>
</li>
<li><p><strong>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</strong>ï¼ˆç±»åŠ è½½å™¨ï¼‰ï¼š</p>
<ul>
<li>è´Ÿè´£æŠŠæ–°ä¹¦ï¼ˆç±»ï¼‰æ”¾åˆ°æ­£ç¡®çš„ä½ç½®</li>
<li>è®°å½•ä¹¦çš„ä½ç½®ä¿¡æ¯</li>
<li>å½“éœ€è¦æ—¶èƒ½å¿«é€Ÿæ‰¾åˆ°å¯¹åº”çš„ä¹¦</li>
</ul>
</li>
<li><p><strong>é˜…è§ˆå®¤</strong>ï¼ˆè¿è¡Œæ—¶ï¼‰ï¼š</p>
<ul>
<li>è¯»è€…ï¼ˆçº¿ç¨‹ï¼‰éœ€è¦çœ‹ä¹¦æ—¶</li>
<li>å…ˆæŸ¥ç›®å½•ï¼ˆå¸¸é‡æ± ï¼‰</li>
<li>æ‰¾åˆ°å…·ä½“é¡µç ï¼ˆæ–¹æ³•ï¼‰</li>
<li>åœ¨é˜…è§ˆæ¡Œï¼ˆæ ˆï¼‰ä¸Šé˜…è¯»</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ–¹æ³•åŒºæ˜¯JVMä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„å†…å­˜åŒºåŸŸï¼Œå®ƒï¼š</p>
<ol>
<li>å­˜å‚¨ç±»çš„ç»“æ„ä¿¡æ¯</li>
<li>å­˜å‚¨æ–¹æ³•çš„å…·ä½“å®ç°</li>
<li>è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«</li>
<li>åœ¨ç±»åŠ è½½æ—¶å¡«å……</li>
<li>åœ¨æ–¹æ³•è°ƒç”¨æ—¶æä¾›æ•°æ®</li>
</ol>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä¹Ÿè¢«ç§°ä¸ºâ€æ°¸ä¹…ä»£â€æˆ–â€å…ƒç©ºé—´â€ï¼Œå› ä¸ºå®ƒå­˜å‚¨çš„æ˜¯ç±»çš„â€å…ƒæ•°æ®â€ï¼Œæ˜¯Javaç¨‹åºè¿è¡Œçš„åŸºç¡€è®¾æ–½ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/04/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E4%B8%80%E4%B8%AAMini_JVM%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/06/04/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E4%B8%80%E4%B8%AAMini_JVM%E5%AE%9E%E7%8E%B0/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-06-04T23:31:00+08:00">
                2025-06-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ç±»åŠ è½½ç³»ç»Ÿï¼ˆClassLoaderï¼‰ï¼š"><a href="#ç±»åŠ è½½ç³»ç»Ÿï¼ˆClassLoaderï¼‰ï¼š" class="headerlink" title="ç±»åŠ è½½ç³»ç»Ÿï¼ˆClassLoaderï¼‰ï¼š"></a><strong>ç±»åŠ è½½ç³»ç»Ÿï¼ˆClassLoaderï¼‰</strong>ï¼š</h2><p>è®©æˆ‘ä»¬çœ‹çœ‹BootstrapClassLoaderçš„å®ç°ï¼š</p>
<p>Read file: src&#x2F;main&#x2F;java&#x2F;club&#x2F;shengsheng&#x2F;jvm&#x2F;BootstrapClassLoader.java<br>ç±»åŠ è½½å™¨çš„å·¥ä½œåŸç†ï¼š</p>
<ol>
<li>æ¥æ”¶ç±»è·¯å¾„åˆ—è¡¨ï¼ˆclasspathï¼‰</li>
<li>æ ¹æ®å…¨é™å®šç±»åï¼ˆå¦‚ï¼šjava.lang.Stringï¼‰åœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾.classæ–‡ä»¶</li>
<li>è¯»å–ç±»æ–‡ä»¶çš„å­—èŠ‚ç </li>
<li>è§£æå­—èŠ‚ç ç”ŸæˆClassFileå¯¹è±¡</li>
</ol>
<h2 id="æ ˆå¸§ï¼ˆStackFrameï¼‰ï¼š"><a href="#æ ˆå¸§ï¼ˆStackFrameï¼‰ï¼š" class="headerlink" title="æ ˆå¸§ï¼ˆStackFrameï¼‰ï¼š"></a><strong>æ ˆå¸§ï¼ˆStackFrameï¼‰</strong>ï¼š</h2><p>è®©æˆ‘ä»¬çœ‹çœ‹æ ˆå¸§çš„å®ç°ï¼š</p>
<p>Read file: src&#x2F;main&#x2F;java&#x2F;club&#x2F;shengsheng&#x2F;jvm&#x2F;StackFrame.java<br>æ ˆå¸§çš„å…³é”®ç»„æˆï¼š</p>
<ol>
<li>å±€éƒ¨å˜é‡è¡¨ï¼ˆlocalVariableï¼‰ï¼šå­˜å‚¨æ–¹æ³•çš„å‚æ•°å’Œå±€éƒ¨å˜é‡</li>
<li>æ“ä½œæ•°æ ˆï¼ˆoperandStackï¼‰ï¼šç”¨äºå­˜å‚¨æŒ‡ä»¤æ“ä½œçš„ä¸´æ—¶æ•°æ®</li>
<li>å­—èŠ‚ç æŒ‡ä»¤åˆ—è¡¨ï¼ˆcodesï¼‰ï¼šæ–¹æ³•çš„æ‰§è¡ŒæŒ‡ä»¤</li>
<li>å¸¸é‡æ± å¼•ç”¨ï¼ˆconstantPoolï¼‰ï¼šç”¨äºè®¿é—®ç±»çš„å¸¸é‡ä¿¡æ¯</li>
</ol>
<h2 id="JVMæ ˆï¼ˆJvmStackï¼‰ï¼š"><a href="#JVMæ ˆï¼ˆJvmStackï¼‰ï¼š" class="headerlink" title="JVMæ ˆï¼ˆJvmStackï¼‰ï¼š"></a><strong>JVMæ ˆï¼ˆJvmStackï¼‰</strong>ï¼š</h2><p>Read file: src&#x2F;main&#x2F;java&#x2F;club&#x2F;shengsheng&#x2F;jvm&#x2F;JvmStack.java<br>JVMæ ˆçš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>ä½¿ç”¨åŒç«¯é˜Ÿåˆ—å­˜å‚¨æ ˆå¸§</li>
<li>æ”¯æŒåŸºæœ¬çš„æ ˆæ“ä½œï¼šå‹æ ˆï¼ˆpushï¼‰ã€å‡ºæ ˆï¼ˆpopï¼‰ã€æŸ¥çœ‹æ ˆé¡¶ï¼ˆpeekï¼‰</li>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„JVMæ ˆ</li>
</ol>
<h2 id="ç”¨ä¸€ä¸ªç”ŸåŠ¨çš„ä¾‹å­æ¥å…¨é¢ç†è§£JVMï¼š"><a href="#ç”¨ä¸€ä¸ªç”ŸåŠ¨çš„ä¾‹å­æ¥å…¨é¢ç†è§£JVMï¼š" class="headerlink" title="ç”¨ä¸€ä¸ªç”ŸåŠ¨çš„ä¾‹å­æ¥å…¨é¢ç†è§£JVMï¼š"></a><strong>ç”¨ä¸€ä¸ªç”ŸåŠ¨çš„ä¾‹å­æ¥å…¨é¢ç†è§£JVM</strong>ï¼š</h2><p>æƒ³è±¡JVMå°±åƒä¸€ä¸ªå·¥å‚ï¼Œè¿™ä¸ªå·¥å‚æ˜¯è¿™æ ·è¿ä½œçš„ï¼š</p>
<ol>
<li><p><strong>ç±»åŠ è½½å°±åƒåŸæ–™å…¥åº“</strong>ï¼š</p>
<ul>
<li>å·¥å‚ï¼ˆJVMï¼‰éœ€è¦å…ˆæŠŠç”Ÿäº§å›¾çº¸ï¼ˆ.classæ–‡ä»¶ï¼‰ä»ä»“åº“ï¼ˆç¡¬ç›˜ï¼‰è¿åˆ°è½¦é—´ï¼ˆå†…å­˜ï¼‰</li>
<li>ç±»åŠ è½½å™¨å°±åƒå‰è½¦ï¼Œè´Ÿè´£è¿™ä¸ªæ¬è¿å’Œæ•´ç†çš„å·¥ä½œ</li>
<li>å›¾çº¸è¢«æ•´ç†å¥½åæ”¾åœ¨å›ºå®šçš„æ¶å­ä¸Šï¼ˆæ–¹æ³•åŒºï¼‰</li>
</ul>
</li>
<li><p><strong>æ ˆå¸§å°±åƒå·¥ä½œå°</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªå·¥äººï¼ˆçº¿ç¨‹ï¼‰éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå°ï¼ˆJVMæ ˆï¼‰</li>
<li>å·¥ä½œå°ä¸Šæœ‰å·¥å…·ç›’ï¼ˆå±€éƒ¨å˜é‡è¡¨ï¼‰å’Œä¸´æ—¶æ”¾ç½®å·¥ä»¶çš„æ‰˜ç›˜ï¼ˆæ“ä½œæ•°æ ˆï¼‰</li>
<li>è¿˜æœ‰ä¸€ä»½ç”Ÿäº§æŒ‡ä»¤ï¼ˆå­—èŠ‚ç ï¼‰å’Œå‚è€ƒæ‰‹å†Œï¼ˆå¸¸é‡æ± ï¼‰</li>
</ul>
</li>
<li><p><strong>æ‰§è¡Œè¿‡ç¨‹å°±åƒæµæ°´çº¿</strong>ï¼š</p>
<ul>
<li>å·¥äººï¼ˆçº¿ç¨‹ï¼‰æŒ‰ç…§æŒ‡ä»¤ä¸€æ­¥æ­¥æ“ä½œ</li>
<li>éœ€è¦é›¶ä»¶æ—¶ä»å·¥å…·ç›’ï¼ˆå±€éƒ¨å˜é‡è¡¨ï¼‰æ‹¿</li>
<li>åŠ å·¥è¿‡ç¨‹ä¸­ç”¨æ‰˜ç›˜ï¼ˆæ“ä½œæ•°æ ˆï¼‰æš‚å­˜</li>
<li>å®Œæˆä¸€ä¸ªäº§å“ï¼ˆæ–¹æ³•è°ƒç”¨ï¼‰å°±æ¸…ç†å·¥ä½œå°ï¼ˆæ ˆå¸§å‡ºæ ˆï¼‰</li>
<li>å¼€å§‹ä¸‹ä¸€ä¸ªäº§å“çš„åˆ¶ä½œï¼ˆæ–°çš„æ–¹æ³•è°ƒç”¨ï¼‰</li>
</ul>
</li>
</ol>
<p>æ‰€ä»¥ï¼ŒJVMçš„æ ¸å¿ƒå°±æ˜¯ï¼šä¸€ä¸ªèƒ½å¤ŸåŠ è½½Javaå­—èŠ‚ç ï¼ˆç±»åŠ è½½ï¼‰ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…å·¥ä½œç©ºé—´ï¼ˆæ ˆå¸§ï¼‰ï¼Œå¹¶æŒ‰ç…§ç‰¹å®šè§„åˆ™ï¼ˆå­—èŠ‚ç ï¼‰æ‰§è¡Œç¨‹åºçš„è½¯ä»¶ç³»ç»Ÿã€‚å®ƒè®©Javaä»£ç èƒ½å¤Ÿåœ¨ä¸åŒçš„ç¡¬ä»¶å¹³å°ä¸Šè¿è¡Œï¼Œå°±åƒä¸€ä¸ªæ ‡å‡†åŒ–çš„å·¥å‚ï¼Œèƒ½åœ¨ä¸–ç•Œå„åœ°ç”¨ç›¸åŒçš„å›¾çº¸ç”Ÿäº§å‡ºç›¸åŒçš„äº§å“ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/04/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E6%93%8D%E4%BD%9C%E6%95%B0%E6%A0%88%EF%BC%88Operand%20Stack%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/06/04/%E3%80%90JVM%E5%AD%A6%E4%B9%A0%E3%80%91%E6%93%8D%E4%BD%9C%E6%95%B0%E6%A0%88%EF%BC%88Operand%20Stack%EF%BC%89/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-06-04T23:28:21+08:00">
                2025-06-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ“ä½œæ•°æ ˆï¼ˆOperand Stackï¼‰çš„æ¦‚å¿µã€‚</p>
<p>æ“ä½œæ•°æ ˆæ˜¯ç”¨æ¥å­˜å‚¨<strong>æ“ä½œçš„æ•°æ®</strong>çš„ï¼Œè€Œä¸æ˜¯å­˜å‚¨æ“ä½œå‘½ä»¤ã€‚æˆ‘ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ï¼š</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€æ®µJavaä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a + b;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç åœ¨JVMä¸­çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li><strong>åŠ è½½æ•°æ®åˆ°æ“ä½œæ•°æ ˆ</strong>ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">iconst_1        // å°†å¸¸é‡1å‹å…¥æ“ä½œæ•°æ ˆ</span><br><span class="line">istore_1        // å°†æ ˆé¡¶çš„1å­˜å…¥å±€éƒ¨å˜é‡è¡¨ä½ç½®1ï¼ˆå˜é‡aï¼‰</span><br><span class="line">iconst_2        // å°†å¸¸é‡2å‹å…¥æ“ä½œæ•°æ ˆ</span><br><span class="line">istore_2        // å°†æ ˆé¡¶çš„2å­˜å…¥å±€éƒ¨å˜é‡è¡¨ä½ç½®2ï¼ˆå˜é‡bï¼‰</span><br><span class="line">iload_1         // å°†å±€éƒ¨å˜é‡è¡¨ä½ç½®1çš„å€¼ï¼ˆa=1ï¼‰å‹å…¥æ“ä½œæ•°æ ˆ</span><br><span class="line">iload_2         // å°†å±€éƒ¨å˜é‡è¡¨ä½ç½®2çš„å€¼ï¼ˆb=2ï¼‰å‹å…¥æ“ä½œæ•°æ ˆ</span><br><span class="line">iadd            // å°†æ ˆé¡¶çš„ä¸¤ä¸ªå€¼ç›¸åŠ ï¼Œç»“æœå‹å…¥æ ˆé¡¶</span><br><span class="line">istore_3        // å°†æ ˆé¡¶çš„ç»“æœå­˜å…¥å±€éƒ¨å˜é‡è¡¨ä½ç½®3ï¼ˆå˜é‡cï¼‰</span><br></pre></td></tr></table></figure></li>
</ol>
<p>è®©æˆ‘ä»¬çœ‹çœ‹æ“ä½œæ•°æ ˆåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­çš„å˜åŒ–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// åˆå§‹çŠ¶æ€</span><br><span class="line">æ“ä½œæ•°æ ˆ: []</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ iconst_1 å</span><br><span class="line">æ“ä½œæ•°æ ˆ: [1]</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ istore_1 å</span><br><span class="line">æ“ä½œæ•°æ ˆ: []</span><br><span class="line">å±€éƒ¨å˜é‡è¡¨: [a=1]</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ iconst_2 å</span><br><span class="line">æ“ä½œæ•°æ ˆ: [2]</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ istore_2 å</span><br><span class="line">æ“ä½œæ•°æ ˆ: []</span><br><span class="line">å±€éƒ¨å˜é‡è¡¨: [a=1, b=2]</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ iload_1 å</span><br><span class="line">æ“ä½œæ•°æ ˆ: [1]</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ iload_2 å</span><br><span class="line">æ“ä½œæ•°æ ˆ: [1, 2]</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ iadd å</span><br><span class="line">æ“ä½œæ•°æ ˆ: [3]</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œ istore_3 å</span><br><span class="line">æ“ä½œæ•°æ ˆ: []</span><br><span class="line">å±€éƒ¨å˜é‡è¡¨: [a=1, b=2, c=3]</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ï¼š</p>
<ol>
<li><p><strong>æ“ä½œæ•°æ ˆçš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li>ä¸´æ—¶å­˜å‚¨æ•°æ®</li>
<li>ä¸ºæŒ‡ä»¤æä¾›æ“ä½œæ•°</li>
<li>å­˜å‚¨æŒ‡ä»¤çš„è®¡ç®—ç»“æœ</li>
</ul>
</li>
<li><p><strong>æ“ä½œå‘½ä»¤ï¼ˆå­—èŠ‚ç æŒ‡ä»¤ï¼‰åœ¨å“ªé‡Œ</strong>ï¼Ÿ</p>
<ul>
<li>å­—èŠ‚ç æŒ‡ä»¤å­˜å‚¨åœ¨æ–¹æ³•çš„Codeå±æ€§ä¸­</li>
<li>ç”±PCå¯„å­˜å™¨ï¼ˆç¨‹åºè®¡æ•°å™¨ï¼‰æŒ‡å‘å½“å‰è¦æ‰§è¡Œçš„æŒ‡ä»¤</li>
<li>æŒ‡ä»¤æœ¬èº«ä¸å­˜åœ¨æ“ä½œæ•°æ ˆä¸­</li>
</ul>
</li>
<li><p><strong>æ“ä½œæ•°æ ˆçš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆç»“æ„</li>
<li>åªå­˜å‚¨å®é™…çš„æ•°æ®å€¼</li>
<li>ä¸å±€éƒ¨å˜é‡è¡¨é…åˆå·¥ä½œ</li>
</ul>
</li>
</ol>
<p>åœ¨æˆ‘ä»¬çš„mini-jvmå®ç°ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ“ä½œæ•°æ ˆçš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Deque&lt;Object&gt; operandStack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>å®ƒå°±åƒä¸€ä¸ªä¸´æ—¶çš„å·¥ä½œåŒºï¼š</p>
<ul>
<li>å½“éœ€è¦è¿›è¡Œè®¡ç®—æ—¶ï¼Œå…ˆæŠŠéœ€è¦çš„å€¼éƒ½å‹å…¥æ ˆ</li>
<li>æŒ‡ä»¤æ‰§è¡Œæ—¶ä»æ ˆé¡¶å–å‡ºæ‰€éœ€çš„å€¼è¿›è¡Œè¿ç®—</li>
<li>è¿ç®—ç»“æœå†å‹å›æ ˆé¡¶</li>
<li>æœ€åå°†ç»“æœå­˜å…¥å±€éƒ¨å˜é‡è¡¨æˆ–ç”¨äºå…¶ä»–æ“ä½œ</li>
</ul>
<p>æ¯”å¦‚åœ¨Thread.javaä¸­çš„æŒ‡ä»¤æ‰§è¡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> iconst_1 -&gt; stack.peek().pushObjectToOperandStack(<span class="number">1</span>);  <span class="comment">// å‹å…¥å¸¸é‡1</span></span><br><span class="line"><span class="keyword">case</span> iadd -&gt; &#123;  <span class="comment">// å¤„ç†åŠ æ³•</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">value2</span> <span class="operator">=</span> (<span class="type">int</span>) stack.peek().operandStack.pop();  <span class="comment">// å¼¹å‡ºç¬¬äºŒä¸ªæ“ä½œæ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">value1</span> <span class="operator">=</span> (<span class="type">int</span>) stack.peek().operandStack.pop();  <span class="comment">// å¼¹å‡ºç¬¬ä¸€ä¸ªæ“ä½œæ•°</span></span><br><span class="line">    stack.peek().pushObjectToOperandStack(value1 + value2);  <span class="comment">// å‹å…¥ç»“æœ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ï¼Œæ“ä½œæ•°æ ˆå°±åƒæ˜¯ä¸€ä¸ªè®¡ç®—å™¨çš„å†…å­˜ï¼Œå­˜å‚¨çš„æ˜¯è¦å‚ä¸è¿ç®—çš„æ•°æ®å’Œè¿ç®—çš„ç»“æœï¼Œè€Œä¸æ˜¯æ“ä½œå‘½ä»¤æœ¬èº«ã€‚æ“ä½œå‘½ä»¤æ˜¯ç”±JVMçš„æ‰§è¡Œå¼•æ“æŒ‰ç…§å­—èŠ‚ç æŒ‡ä»¤ä¸€æ¡ä¸€æ¡æ‰§è¡Œçš„ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/22/%E3%80%90Git%E5%AD%A6%E4%B9%A0%E3%80%91%E5%A6%82%E4%BD%95%E5%B0%86Unity%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0Github%E8%BF%9B%E8%A1%8C%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/05/22/%E3%80%90Git%E5%AD%A6%E4%B9%A0%E3%80%91%E5%A6%82%E4%BD%95%E5%B0%86Unity%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0Github%E8%BF%9B%E8%A1%8C%E7%AE%A1%E7%90%86/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-05-22T10:37:49+08:00">
                2025-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="å¦‚ä½•å°†Unityé¡¹ç›®ä¸Šä¼ åˆ°Githubè¿›è¡Œç®¡ç†"><a href="#å¦‚ä½•å°†Unityé¡¹ç›®ä¸Šä¼ åˆ°Githubè¿›è¡Œç®¡ç†" class="headerlink" title="å¦‚ä½•å°†Unityé¡¹ç›®ä¸Šä¼ åˆ°Githubè¿›è¡Œç®¡ç†"></a>å¦‚ä½•å°†Unityé¡¹ç›®ä¸Šä¼ åˆ°Githubè¿›è¡Œç®¡ç†</h1><h2 id="1-ä¸‹è½½å®‰è£…Git"><a href="#1-ä¸‹è½½å®‰è£…Git" class="headerlink" title="1.ä¸‹è½½å®‰è£…Git"></a>1.ä¸‹è½½å®‰è£…Git</h2><p>å¿½ç•¥ï¼Œè‡ªè¡Œå®‰è£…</p>
<h2 id="2-åœ¨Githubä¸Šé¢æ–°å»ºä¸€ä¸ªä»“åº“"><a href="#2-åœ¨Githubä¸Šé¢æ–°å»ºä¸€ä¸ªä»“åº“" class="headerlink" title="2.åœ¨Githubä¸Šé¢æ–°å»ºä¸€ä¸ªä»“åº“"></a>2.åœ¨Githubä¸Šé¢æ–°å»ºä¸€ä¸ªä»“åº“</h2><p>å¦‚ä¸‹å›¾ï¼Œè¿™é‡Œ.gitignoreæ–‡ä»¶ååˆ†å»ºè®®é€‰æ‹©Unityæ¨¡æ¿</p>
<h2 id="3-å¤åˆ¶ä»“åº“åœ°å€"><a href="#3-å¤åˆ¶ä»“åº“åœ°å€" class="headerlink" title="3.å¤åˆ¶ä»“åº“åœ°å€"></a>3.å¤åˆ¶ä»“åº“åœ°å€</h2><p>æŠŠè¿™é‡Œçš„åœ°å€å¤åˆ¶ä¸€ä¸‹ï¼Œåé¢éœ€è¦ç”¨</p>
<h2 id="4-åœ¨é¡¹ç›®æ–‡ä»¶å¤¹æ‰“å¼€Git-Bash"><a href="#4-åœ¨é¡¹ç›®æ–‡ä»¶å¤¹æ‰“å¼€Git-Bash" class="headerlink" title="4.åœ¨é¡¹ç›®æ–‡ä»¶å¤¹æ‰“å¼€Git Bash"></a>4.åœ¨é¡¹ç›®æ–‡ä»¶å¤¹æ‰“å¼€Git Bash</h2><p>è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹å³å‡»é€‰æ‹©Git Bash Here</p>
<h3 id="4-1åˆå§‹åŒ–ä»“åº“"><a href="#4-1åˆå§‹åŒ–ä»“åº“" class="headerlink" title="4.1åˆå§‹åŒ–ä»“åº“"></a>4.1åˆå§‹åŒ–ä»“åº“</h3><p>è¾“å…¥</p>
<p>git init</p>
<h3 id="4-2å»ºç«‹è¿œç¨‹è¿æ¥"><a href="#4-2å»ºç«‹è¿œç¨‹è¿æ¥" class="headerlink" title="4.2å»ºç«‹è¿œç¨‹è¿æ¥"></a>4.2å»ºç«‹è¿œç¨‹è¿æ¥</h3><p>è¾“å…¥</p>
<p>git remote add origin <a target="_blank" rel="noopener" href="https://github.com/xxxx/xxxx.git%EF%BC%88%E4%B9%8B%E5%89%8D%E5%A4%8D%E5%88%B6%E7%9A%84%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80%EF%BC%89">https://github.com/xxxx/xxxx.gitï¼ˆä¹‹å‰å¤åˆ¶çš„ä»“åº“åœ°å€ï¼‰</a></p>
<h3 id="4-3é…ç½®ä¿¡æ¯"><a href="#4-3é…ç½®ä¿¡æ¯" class="headerlink" title="4.3é…ç½®ä¿¡æ¯"></a>4.3é…ç½®ä¿¡æ¯</h3><p>è¾“å…¥</p>
<p>git config user.name â€œåå­—â€<br>git config user.email â€œé‚®ç®±â€</p>
<p>æˆ–</p>
<p>git config â€“global user.name â€œåå­—â€<br>git config â€“global user.email â€œé‚®ç®±â€</p>
<p>åè€…åªéœ€è¦ä¸€æ¬¡ï¼Œä»¥åä¸Šä¼ å…¶ä»–ä»“åº“ä»æŒ‰ä¿ç•™ï¼Œä¸å†éœ€è¦è¿›è¡Œé…ç½®</p>
<h3 id="4-4ä¸‹è½½ä»“åº“åˆ°æœ¬åœ°"><a href="#4-4ä¸‹è½½ä»“åº“åˆ°æœ¬åœ°" class="headerlink" title="4.4ä¸‹è½½ä»“åº“åˆ°æœ¬åœ°"></a>4.4ä¸‹è½½ä»“åº“åˆ°æœ¬åœ°</h3><p>è¾“å…¥</p>
<p>git pull origin master</p>
<p>å®Œæˆåï¼Œæœ¬åœ°æ–‡ä»¶å¤¹ä¼šä¸‹è½½ç©ºä»“åº“ä¸­çš„.gitignoreå’ŒLICENSEæ–‡ä»¶ï¼ŒåŠ¡å¿…ç¡®ä¿æ‰§è¡Œè¿™ä¸€æ­¥ä¹‹å‰æœ¬åœ°æ–‡ä»¶å¤¹æ²¡æœ‰è¿™ä¸¤ä¸ªæ–‡ä»¶</p>
<h3 id="4-5ä¸Šä¼ é¡¹ç›®åˆ°ä»“åº“"><a href="#4-5ä¸Šä¼ é¡¹ç›®åˆ°ä»“åº“" class="headerlink" title="4.5ä¸Šä¼ é¡¹ç›®åˆ°ä»“åº“"></a>4.5ä¸Šä¼ é¡¹ç›®åˆ°ä»“åº“</h3><p>è¾“å…¥</p>
<p>git add .<br>git commit -m â€œå¤‡æ³¨â€<br>git push origin master</p>
<p>è‡³æ­¤å®Œæˆæœ¬åœ°é¡¹ç›®çš„ä¸Šä¼ </p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>githubåˆ›å»ºæ–°ä»“åº“(master)ï¼Œæœ¬åœ°ç°æœ‰é¡¹ç›®ä¸Šä¼ <br>1.git init<br>2.git remote add origin <a target="_blank" rel="noopener" href="https://github.com/xxxx/xxxx.git">https://github.com/xxxx/xxxx.git</a><br>3.git pull origin master è¿™ä¸€æ­¥ç»å¸¸è¿æ¥ä¸ä¸Š<br>4.git add .<br>5.git commit -m â€œå¤‡æ³¨â€<br>6.git push origin master</p>
<p>å¼ºåˆ¶æ·»åŠ è¢«ignoreçš„æ–‡ä»¶<br>1.git add -f Builds&#x2F;<br>2.git commit -m â€œå¤‡æ³¨â€<br>3.git push origin master</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/19/%E3%80%90Docker%E5%AD%A6%E4%B9%A0%E3%80%91WSL%E3%80%81Docker%20%E8%BF%81%E7%A7%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/05/19/%E3%80%90Docker%E5%AD%A6%E4%B9%A0%E3%80%91WSL%E3%80%81Docker%20%E8%BF%81%E7%A7%BB/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-05-19T23:07:43+08:00">
                2025-05-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="WSLã€Docker-è¿ç§»"><a href="#WSLã€Docker-è¿ç§»" class="headerlink" title="WSLã€Docker è¿ç§»"></a>WSLã€Docker è¿ç§»</h1><p>Windows WSL Docker é»˜è®¤å®‰è£…è·¯å¾„åœ¨Cç›˜çš„ï¼Œå¯¼è‡´å²Œå²Œå¯å±çš„Cç›˜ç©ºé—´ğŸ˜±æ›´åŠ åƒç´§ï¼Œä¸€ä¸å°å¿ƒå°±è¦å‡ºç°ğŸ‘‡è¿™ç§æƒ…å†µäº†</p>
<p><img src="https://img2024.cnblogs.com/blog/1131701/202408/1131701-20240815143048352-1440225869.png" alt="image"></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·è¿ç§»å®ƒä»¬å§</p>
<h2 id="è¿ç§»-WSL"><a href="#è¿ç§»-WSL" class="headerlink" title="è¿ç§» WSL"></a>è¿ç§» WSL</h2><p>WSL2 é»˜è®¤å®‰è£…åœ¨ C ç›˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿ç§»å®‰è£…ä½ç½®<br>é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºå·²å®‰è£…çš„ Linux å‘è¡Œç‰ˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl -l -v</span><br></pre></td></tr></table></figure>

<p><img src="https://img2024.cnblogs.com/blog/1131701/202408/1131701-20240815145222644-1202975402.png" alt="image"><br>å¯ä»¥çœ‹åˆ°å·²å®‰è£…äº† Ubuntuï¼Œå…¶è¿è¡ŒçŠ¶æ€ä¸ºï¼šStopped</p>
<h3 id="å¯¼å‡ºåˆ†å‘ç‰ˆ"><a href="#å¯¼å‡ºåˆ†å‘ç‰ˆ" class="headerlink" title="å¯¼å‡ºåˆ†å‘ç‰ˆ"></a>å¯¼å‡ºåˆ†å‘ç‰ˆ</h3><p>å¦‚æœè¿è¡ŒçŠ¶æ€ä¸º Runningï¼Œéœ€å…ˆé€šè¿‡ä»¥ä¸‹å‘½ä»¤å…³é—­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --shutdown</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°† Ubuntu å¯¼å‡ºä¸º tar æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --export Ubuntu d:\wsl\Ubuntu.tar</span><br></pre></td></tr></table></figure>

<p><img src="https://img2024.cnblogs.com/blog/1131701/202408/1131701-20240815145856500-292128290.png" alt="image"></p>
<blockquote>
<p>âš ï¸<br>wsl â€“export <Distribution Name> <FileName><br><code>&lt;Distribution Name&gt;</code> ä¸ºç›®æ ‡ Linux å‘è¡Œç‰ˆçš„åç§°ï¼Œæˆ‘å®‰è£…çš„ä¸ºï¼š <code>Ubuntu</code><br><code>&lt;FileName&gt;</code> ä¸ºå¯¼å‡ºçš„æ–‡ä»¶åï¼Œè¿™é‡Œæˆ‘å¯¼å‡ºåˆ° <code>d:\wsl\Ubuntu.tar</code><br>å½“ç„¶å¯ä»¥æ˜¯ä»»æ„ä½ç½®</p>
</blockquote>
<h3 id="æ³¨é”€å¹¶å¸è½½"><a href="#æ³¨é”€å¹¶å¸è½½" class="headerlink" title="æ³¨é”€å¹¶å¸è½½"></a>æ³¨é”€å¹¶å¸è½½</h3><p>ç„¶åæ³¨é”€å¹¶å¸è½½ Ubuntu</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister Ubuntu</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™å¯ä»¥æ‰§è¡ŒéªŒè¯æ˜¯å¦å®Œæˆæ³¨é”€å¹¶å¸è½½<br><code>wsl -l -v</code></p>
<p><img src="https://img2024.cnblogs.com/blog/1131701/202408/1131701-20240815160735996-160221150.png" alt="image"></p>
<p><img src="https://img2024.cnblogs.com/blog/1131701/202408/1131701-20240815160813251-615510379.png" alt="image"></p>
<p>ğŸ‘å®Œç¾ï¼Œç¬¦åˆé¢„æœŸï¼ï¼ï¼</p>
<h3 id="å¯¼å…¥å®‰è£…"><a href="#å¯¼å…¥å®‰è£…" class="headerlink" title="å¯¼å…¥å®‰è£…"></a>å¯¼å…¥å®‰è£…</h3><p>å°† Ubuntu ä»æ–°ä½ç½®å¯¼å…¥ï¼š<br><code>wsl --import Ubuntu d:\wsl\Ubuntu d:\wsl\Ubuntu.tar</code><br>å†æ¬¡æŸ¥çœ‹å·²å®‰è£…çš„ Linux å‘è¡Œç‰ˆ<br><code>wsl -l -v</code><br><img src="https://img2024.cnblogs.com/blog/1131701/202408/1131701-20240815161553829-1503338969.png" alt="image"></p>
<p>è®¾ç½®é»˜è®¤ç”¨æˆ·<br><code>Ubuntu config --default-user bigroc</code></p>
<blockquote>
<p>âš ï¸<br><DistributionName> config â€“default-user <Username><br><code>&lt;DistributionName&gt;</code> ä¸ºç›®æ ‡ Linux å‘è¡Œç‰ˆçš„åç§°ï¼Œæˆ‘å®‰è£…çš„ä¸ºï¼š <code>Ubuntu</code>ï¼Œå‘½ä»¤é‡Œè¦å†™ä¸ºï¼š<code>Ubuntu</code><br>å‡å¦‚ä½ çš„æ˜¯<code>Ubuntu-22.04</code>ï¼Œå‘½ä»¤é‡Œè¦å†™ä¸ºï¼š<code>Ubuntu2204</code><br><code>&lt;Username&gt;</code> ä¸º WSL å‘è¡Œç‰ˆä¸­å­˜åœ¨çš„ç”¨æˆ·åï¼Œåœ¨è®¾ç½® Linux ç”¨æˆ·åå’Œå¯†ç æ—¶æˆ‘åˆ›å»ºçš„ç”¨æˆ·ä¸ºï¼š<code>bigroc</code> ï¼Œæ‰€ä»¥å‘½ä»¤é‡Œçš„ <code>&lt;Username&gt;</code> è¿™é‡Œå°±ä¸ºï¼š<code>bigroc</code></p>
</blockquote>
<h2 id="è¿ç§»-docker-desktop-data-å’Œ-docker-desktop"><a href="#è¿ç§»-docker-desktop-data-å’Œ-docker-desktop" class="headerlink" title="è¿ç§» docker-desktop-data å’Œ docker-desktop"></a>è¿ç§» docker-desktop-data å’Œ docker-desktop</h2><p>Docker Desktop ä¼šåˆ›å»ºä¸¤ä¸ªå‘è¡Œç‰ˆï¼š<code>docker-desktop-data</code> å’Œ <code>docker-desktop</code>ï¼Œå®ƒä»¬çš„é»˜è®¤ä½ç½®åœ¨ <code>C:\Users\&lt;ä½ ç”µè„‘çš„ç”¨æˆ·å&gt;\AppData\Local\Docker\wsl</code>ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥å‚è€ƒä¸Šé¢å¯¼å…¥å¯¼å‡º <code>Ubuntu</code> çš„è¿‡ç¨‹å°†<code>docker-desktop-data</code> å’Œ <code>docker-desktop</code> è¿ç§»åˆ°å…¶ä»–ä½ç½®</p>
<p>è¿‡ç¨‹ä¸€è‡´â¬‡ï¸</p>
<h3 id="å¯¼å‡º"><a href="#å¯¼å‡º" class="headerlink" title="å¯¼å‡º"></a>å¯¼å‡º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --export docker-desktop-data d:\wsl\docker-desktop-data.tar`</span><br><span class="line">`wsl --export docker-desktop-data d:\wsl\docker-desktop.tar</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨é”€å¸è½½"><a href="#æ³¨é”€å¸è½½" class="headerlink" title="æ³¨é”€å¸è½½"></a>æ³¨é”€å¸è½½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister docker-desktop-data`</span><br><span class="line">`wsl --unregister docker-desktop</span><br></pre></td></tr></table></figure>

<h3 id="å¯¼å…¥å®‰è£…-1"><a href="#å¯¼å…¥å®‰è£…-1" class="headerlink" title="å¯¼å…¥å®‰è£…"></a>å¯¼å…¥å®‰è£…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl --import docker-desktop-data d:\wsl\docker-desktop-data d:\wsl\docker-desktop-data.tar`</span><br><span class="line">`wsl --import docker-desktop d:\wsl\docker-desktop d:\wsl\docker-desktop.tar</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ å…¬å¸çš„ç”µè„‘åˆä¸€æ¬¡æˆåŠŸå¤æ´»<br><img src="https://img2024.cnblogs.com/blog/1131701/202408/1131701-20240815165529003-2038965666.png" alt="image"></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol>
<li>ã€microsoftã€‘<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands">WSL çš„åŸºæœ¬å‘½ä»¤</a></li>
<li>ã€csdnã€‘<a target="_blank" rel="noopener" href="https://blog.csdn.net/cn_ljr/article/details/132047516">Win11 å®‰è£… Docker Desktop å’Œ WSL2 å¹¶è¿›è¡Œå®‰è£…ä½ç½®è¿ç§»</a></li>
<li>ã€bilibiliã€‘ã€2025ã€Docker Windowsã€‘Cç›˜æ»¡äº†é€šè¿‡WSLå°†dockeræ•°æ®è¿ç§»åˆ°Dç›˜ã€‘ <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV17qdpYGEEE/?share_source=copy_web&vd_source=654a4e361961dcce96893993981165f5">https://www.bilibili.com/video/BV17qdpYGEEE/?share_source=copy_web&amp;vd_source=654a4e361961dcce96893993981165f5</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/17/%E3%80%90Unity%E5%AD%A6%E4%B9%A0%E3%80%91Unity%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/05/17/%E3%80%90Unity%E5%AD%A6%E4%B9%A0%E3%80%91Unity%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-05-17T22:16:44+08:00">
                2025-05-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ã€Unityå­¦ä¹ ã€‘Unityå¼€å‘è§„èŒƒ"><a href="#ã€Unityå­¦ä¹ ã€‘Unityå¼€å‘è§„èŒƒ" class="headerlink" title="ã€Unityå­¦ä¹ ã€‘Unityå¼€å‘è§„èŒƒ"></a>ã€Unityå­¦ä¹ ã€‘Unityå¼€å‘è§„èŒƒ</h1><h1 id="Unityæ“ä½œæŒ‡å—"><a href="#Unityæ“ä½œæŒ‡å—" class="headerlink" title="Unityæ“ä½œæŒ‡å—"></a>Unityæ“ä½œæŒ‡å—</h1><h2 id="åŸºç¡€æ“ä½œè§„èŒƒ"><a href="#åŸºç¡€æ“ä½œè§„èŒƒ" class="headerlink" title="åŸºç¡€æ“ä½œè§„èŒƒ"></a>åŸºç¡€æ“ä½œè§„èŒƒ</h2><h3 id="1-åœºæ™¯æ“ä½œ"><a href="#1-åœºæ™¯æ“ä½œ" class="headerlink" title="1. åœºæ™¯æ“ä½œ"></a>1. åœºæ™¯æ“ä½œ</h3><ul>
<li>åˆ›å»ºæ–°åœºæ™¯ï¼š<ol>
<li>åœ¨Projectçª—å£ä¸­å³é”® â†’ Create â†’ Scene</li>
<li>å°†æ–°åœºæ™¯ä¿å­˜åˆ° <code>Assets/Scenes</code> ç›®å½•ä¸‹</li>
<li>åœ¨Build Settingsä¸­æ·»åŠ åœºæ™¯ï¼ˆFile â†’ Build Settingsï¼‰</li>
</ol>
</li>
</ul>
<h3 id="2-é¢„åˆ¶ä½“-Prefab-æ“ä½œ"><a href="#2-é¢„åˆ¶ä½“-Prefab-æ“ä½œ" class="headerlink" title="2. é¢„åˆ¶ä½“(Prefab)æ“ä½œ"></a>2. é¢„åˆ¶ä½“(Prefab)æ“ä½œ</h3><ul>
<li>åˆ›å»ºé¢„åˆ¶ä½“ï¼š<ol>
<li>åœ¨Hierarchyçª—å£ä¸­åˆ›å»º&#x2F;è®¾è®¡å¥½æ¸¸æˆå¯¹è±¡</li>
<li>å°†å¯¹è±¡æ‹–æ‹½åˆ°Projectçª—å£çš„ <code>Assets/Prefabs</code> ç›®å½•ä¸­</li>
<li>é¢„åˆ¶ä½“ä¼šæ˜¾ç¤ºä¸ºè“è‰²ï¼Œè¡¨ç¤ºåˆ›å»ºæˆåŠŸ</li>
</ol>
</li>
</ul>
<h3 id="3-è„šæœ¬æ·»åŠ "><a href="#3-è„šæœ¬æ·»åŠ " class="headerlink" title="3. è„šæœ¬æ·»åŠ "></a>3. è„šæœ¬æ·»åŠ </h3><ul>
<li>æ·»åŠ æ–°è„šæœ¬ï¼š<ol>
<li>åœ¨Projectçª—å£ä¸­å³é”® â†’ Create â†’ C# Script</li>
<li>å°†è„šæœ¬ä¿å­˜åˆ°å¯¹åº”çš„ <code>Assets/Script/[æ¨¡å—å]</code> ç›®å½•ä¸‹</li>
<li>å°†è„šæœ¬æ‹–æ‹½åˆ°Hierarchyä¸­çš„ç›®æ ‡æ¸¸æˆå¯¹è±¡ä¸Š</li>
<li>åœ¨Inspectorä¸­è®¾ç½®è„šæœ¬çš„å…¬å…±å˜é‡</li>
</ol>
</li>
</ul>
<h3 id="4-ç»„ä»¶æ“ä½œ"><a href="#4-ç»„ä»¶æ“ä½œ" class="headerlink" title="4. ç»„ä»¶æ“ä½œ"></a>4. ç»„ä»¶æ“ä½œ</h3><ul>
<li>æ·»åŠ ç»„ä»¶ï¼š<ol>
<li>é€‰ä¸­æ¸¸æˆå¯¹è±¡</li>
<li>åœ¨Inspectorçª—å£ç‚¹å‡»â€Add Componentâ€</li>
<li>æœç´¢å¹¶é€‰æ‹©éœ€è¦çš„ç»„ä»¶</li>
<li>åœ¨Inspectorä¸­é…ç½®ç»„ä»¶å‚æ•°</li>
</ol>
</li>
</ul>
<h2 id="å¸¸è§åŠŸèƒ½å®ç°æŒ‡å—"><a href="#å¸¸è§åŠŸèƒ½å®ç°æŒ‡å—" class="headerlink" title="å¸¸è§åŠŸèƒ½å®ç°æŒ‡å—"></a>å¸¸è§åŠŸèƒ½å®ç°æŒ‡å—</h2><h3 id="1-è§’è‰²ç§»åŠ¨åŠŸèƒ½"><a href="#1-è§’è‰²ç§»åŠ¨åŠŸèƒ½" class="headerlink" title="1. è§’è‰²ç§»åŠ¨åŠŸèƒ½"></a>1. è§’è‰²ç§»åŠ¨åŠŸèƒ½</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ Assets/Script/Player/PlayerMovement.cs ä¸­å®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PlayerMovement</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed = <span class="number">5f</span>;</span><br><span class="line">    <span class="keyword">private</span> Rigidbody2D rb;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è·å–åˆšä½“ç»„ä»¶</span></span><br><span class="line">        rb = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»ºè§’è‰²æ¸¸æˆå¯¹è±¡ï¼ˆHierarchy â†’ 2D Object â†’ Spriteï¼‰</li>
<li>æ·»åŠ Rigidbody2Dç»„ä»¶ï¼ˆInspector â†’ Add Component â†’ Rigidbody2Dï¼‰</li>
<li>æ·»åŠ Collider2Dç»„ä»¶ï¼ˆInspector â†’ Add Component â†’ Box Collider 2Dï¼‰</li>
<li>åˆ›å»ºå¹¶æ·»åŠ ç§»åŠ¨è„šæœ¬</li>
<li>åœ¨Inspectorä¸­è®¾ç½®moveSpeedå€¼</li>
</ol>
<h3 id="2-åŠ¨ç”»ç³»ç»Ÿè®¾ç½®"><a href="#2-åŠ¨ç”»ç³»ç»Ÿè®¾ç½®" class="headerlink" title="2. åŠ¨ç”»ç³»ç»Ÿè®¾ç½®"></a>2. åŠ¨ç”»ç³»ç»Ÿè®¾ç½®</h3><p>å®ç°æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»ºåŠ¨ç”»æ–‡ä»¶å¤¹ï¼š<code>Assets/Animations/[è§’è‰²å]</code></li>
<li>å¯¼å…¥ç²¾çµå›¾ï¼š<ul>
<li>å°†å›¾ç‰‡æ–‡ä»¶æ”¾å…¥ <code>Assets/Sprites</code> ç›®å½•</li>
<li>é€‰æ‹©å›¾ç‰‡ï¼Œåœ¨Inspectorä¸­è®¾ç½®ï¼š<ul>
<li>Texture Type: Sprite (2D and UI)</li>
<li>Sprite Mode: Multiple (å¦‚æœæ˜¯ç²¾çµå›¾é›†)</li>
</ul>
</li>
</ul>
</li>
<li>åˆ›å»ºåŠ¨ç”»å™¨ï¼š<ul>
<li>é€‰ä¸­è§’è‰²ï¼Œæ·»åŠ Animatorç»„ä»¶</li>
<li>åœ¨Projectçª—å£åˆ›å»ºAnimator Controller</li>
<li>å°†Controlleræ‹–æ‹½åˆ°è§’è‰²çš„Animatorç»„ä»¶ä¸Š</li>
</ul>
</li>
</ol>
<h3 id="3-UIç³»ç»Ÿå®ç°"><a href="#3-UIç³»ç»Ÿå®ç°" class="headerlink" title="3. UIç³»ç»Ÿå®ç°"></a>3. UIç³»ç»Ÿå®ç°</h3><p>å®ç°æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ›å»ºCanvasï¼š<ul>
<li>Hierarchy â†’ UI â†’ Canvas</li>
<li>ç¡®ä¿æœ‰EventSystem</li>
</ul>
</li>
<li>æ·»åŠ UIå…ƒç´ ï¼š<ul>
<li>åœ¨Canvasä¸‹å³é”® â†’ UI â†’ é€‰æ‹©éœ€è¦çš„UIå…ƒç´ </li>
</ul>
</li>
<li>åˆ›å»ºUIè„šæœ¬ï¼š<ul>
<li>åœ¨ <code>Assets/Script/UI</code> ç›®å½•ä¸‹åˆ›å»ºè„šæœ¬</li>
<li>å°†è„šæœ¬æŒ‚è½½åˆ°å¯¹åº”UIå…ƒç´ ä¸Š</li>
</ul>
</li>
</ol>
<h3 id="4-åœºæ™¯åˆ‡æ¢"><a href="#4-åœºæ™¯åˆ‡æ¢" class="headerlink" title="4. åœºæ™¯åˆ‡æ¢"></a>4. åœºæ™¯åˆ‡æ¢</h3><p>å®ç°æ­¥éª¤ï¼š</p>
<ol>
<li>ç¡®ä¿æ‰€æœ‰åœºæ™¯éƒ½åœ¨Build Settingsä¸­</li>
<li>åˆ›å»ºåˆ‡æ¢è„šæœ¬ï¼š<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ Assets/Script/Transition/SceneLoader.cs ä¸­å®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SceneLoader</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LoadScene</span>(<span class="params"><span class="built_in">string</span> sceneName</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        SceneManager.LoadScene(sceneName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>åœ¨UIæŒ‰é’®ä¸Šæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼š<ul>
<li>é€‰æ‹©æŒ‰é’®</li>
<li>åœ¨Inspectorä¸­æ‰¾åˆ°Buttonç»„ä»¶</li>
<li>ç‚¹å‡» â€œ+â€ æ·»åŠ OnClickäº‹ä»¶</li>
<li>æ‹–æ‹½åŒ…å«SceneLoaderè„šæœ¬çš„å¯¹è±¡</li>
<li>é€‰æ‹©LoadSceneå‡½æ•°</li>
</ul>
</li>
</ol>
<h2 id="è°ƒè¯•æŠ€å·§"><a href="#è°ƒè¯•æŠ€å·§" class="headerlink" title="è°ƒè¯•æŠ€å·§"></a>è°ƒè¯•æŠ€å·§</h2><ol>
<li>ä½¿ç”¨Debug.Log()è¾“å‡ºä¿¡æ¯ï¼š<ul>
<li>åœ¨Consoleçª—å£æŸ¥çœ‹è¾“å‡º</li>
<li>ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†æ—¥å¿—çº§åˆ«ï¼š<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Debug.Log(<span class="string">&quot;æ™®é€šä¿¡æ¯&quot;</span>);</span><br><span class="line">Debug.LogWarning(<span class="string">&quot;è­¦å‘Šä¿¡æ¯&quot;</span>);</span><br><span class="line">Debug.LogError(<span class="string">&quot;é”™è¯¯ä¿¡æ¯&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>ä½¿ç”¨Sceneè§†å›¾å·¥å…·ï¼š<ul>
<li>ä½¿ç”¨Gizmoså¯è§†åŒ–ç¢°æ’å™¨å’Œè·¯å¾„</li>
<li>ä½¿ç”¨Sceneçª—å£é¡¶éƒ¨çš„2D&#x2F;3Dåˆ‡æ¢æŒ‰é’®</li>
</ul>
</li>
</ol>
<h2 id="æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2><ol>
<li>ä½¿ç”¨å¯¹è±¡æ± è€Œä¸æ˜¯é¢‘ç¹åˆ›å»ºé”€æ¯å¯¹è±¡</li>
<li>åˆç†ä½¿ç”¨åç¨‹(Coroutine)å¤„ç†å»¶æ—¶ä»»åŠ¡</li>
<li>é¿å…åœ¨Updateä¸­è¿›è¡Œå¤æ‚è®¡ç®—</li>
</ol>
<p>è¯·åœ¨å¼€å‘æ—¶å‚è€ƒæ­¤æŒ‡å—ï¼Œç¡®ä¿æŒ‰æ­¥éª¤å®ç°åŠŸèƒ½ã€‚å¦‚æœ‰ç–‘é—®ï¼Œå¯ä»¥æŸ¥çœ‹Unityå®˜æ–¹æ–‡æ¡£æˆ–å’¨è¯¢æœ‰ç»éªŒçš„å¼€å‘è€…ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/25/%E3%80%90Sa-Token%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E3%80%91%E4%BD%BF%E7%94%A8%20Sa-Token%20%E7%9A%84%E5%85%A8%E5%B1%80%E8%BF%87%E6%BB%A4%E5%99%A8%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%EF%BC%88%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%85%A8%E7%89%88%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2025/04/25/%E3%80%90Sa-Token%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E3%80%91%E4%BD%BF%E7%94%A8%20Sa-Token%20%E7%9A%84%E5%85%A8%E5%B1%80%E8%BF%87%E6%BB%A4%E5%99%A8%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%EF%BC%88%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%85%A8%E7%89%88%EF%BC%89/" itemprop="url">æœªå‘½å</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2025-04-25T16:53:55+08:00">
                2025-04-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä½¿ç”¨-Sa-Token-çš„å…¨å±€è¿‡æ»¤å™¨è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆä¸‰ç§æ–¹å¼å…¨ç‰ˆï¼‰"><a href="#ä½¿ç”¨-Sa-Token-çš„å…¨å±€è¿‡æ»¤å™¨è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆä¸‰ç§æ–¹å¼å…¨ç‰ˆï¼‰" class="headerlink" title="ä½¿ç”¨ Sa-Token çš„å…¨å±€è¿‡æ»¤å™¨è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆä¸‰ç§æ–¹å¼å…¨ç‰ˆï¼‰"></a>ä½¿ç”¨ Sa-Token çš„å…¨å±€è¿‡æ»¤å™¨è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆä¸‰ç§æ–¹å¼å…¨ç‰ˆï¼‰</h1><p>åœ¨ web å¼€å‘ä¸­ï¼Œè·¨åŸŸç»å¯¹æ˜¯æ¯”è¾ƒæŠ˜ç£¨æ–°åŒå­¦çš„ä¸€ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡å°†è®²è§£ä¸‰ç§å¸¸è§çš„è·¨åŸŸæƒ…å½¢ï¼Œå¹¶è®²è§£å¦‚ä½•ä½¿ç”¨ Sa-Token æ¡†æ¶è§£å†³è·¨åŸŸé—®é¢˜ã€‚</p>
<h3 id="ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿè·¨åŸŸ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿè·¨åŸŸ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿè·¨åŸŸ"></a>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿè·¨åŸŸ</h3><p>ç®€å•ç†è§£ï¼Œå°±æ˜¯ä½ åœ¨ A åŸŸåä¸‹çš„é¡µé¢ï¼Œå»è°ƒç”¨ B åŸŸåçš„æ¥å£ï¼Œæµè§ˆå™¨æ„Ÿè§‰ä½ è¿™æ¬¡è°ƒç”¨å¯èƒ½æ˜¯ä¸å®‰å…¨çš„è¯·æ±‚è¡Œä¸ºï¼Œäºæ˜¯å®ƒéœ€è¦ç”¨ cors å®‰å…¨ç­–ç•¥æ¥ç¡®è®¤ä¸€ä¸‹è¿™ä¸ªè¯·æ±‚æ˜¯ç”±ç”¨æˆ·çœŸå®çš„æ„æ„¿å‘å‡ºçš„ï¼Œè€Œä¸æ˜¯è¢« csrf ä¼ªé€ è¯·æ±‚æ”»å‡»å·å·å‘é€çš„ã€‚ï¼ˆè¿™ä¹ˆè¯´åªæ˜¯ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œä¸æ˜¯ç‰¹åˆ«ä¸¥è°¨ï¼Œå®é™…ä¸ŠåŒåŸŸåä¸‹éƒ¨åˆ†æƒ…å½¢ä¹Ÿä¼šå‡ºç°è·¨åŸŸé—®é¢˜ï¼‰</p>
<p>è¯·ä»”ç»†ç†è§£ä¸Šé¢è¿™æ®µè¯ï¼Œå› ä¸ºå®ƒè¯´æ˜äº†ä¸¤ç‚¹ï¼š</p>
<ul>
<li>è·¨åŸŸä¸æ˜¯åç«¯æ¥å£å¯¹å‰ç«¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œè€Œæ˜¯å‰ç«¯æµè§ˆå™¨å¯¹ç”¨æˆ·çš„é™åˆ¶ã€‚</li>
<li>è·¨åŸŸä¸æ˜¯åœ¨ä¿æŠ¤åç«¯æ¥å£å…å—æ”»å‡»ï¼Œè€Œæ˜¯æµè§ˆå™¨åœ¨ä¿æŠ¤ç”¨æˆ·ï¼Œé¿å…ç”¨æˆ·å‘é€è‡ªå·±ä¸æƒ³å‘é€çš„è¯·æ±‚ã€‚</li>
</ul>
<p>è¯·ä¸€å®šè¦è®°ä½ä¸Šé¢è·¨åŸŸçš„æœ¬è´¨ï¼Œæ˜ç™½äº†ç—‡çŠ¶å’ŒåŸå› ï¼Œæˆ‘ä»¬æ‰èƒ½å¯¹ç—‡ä¸‹è¯ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34905631/article/details/140277487">https://blog.csdn.net/qq_34905631/article/details/140277487</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Gemini
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
